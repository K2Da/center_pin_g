import{D as I,S as le,i as se,s as re,e as M,t as A,k as P,l as J,c as D,a as H,h as C,d as u,m as q,g as E,H as b,j as x,o as w,p as K,q as k,w as Q,x as Y,b as V,y as z,B as F,Q as oe,M as me,n as U,O as W}from"./vendor-96e95496.js";import{D as fe}from"./Date-9d434d83.js";import ce from"../pages/log/detail/TeamMatches.svelte-4415e1aa.js";import{P as ie}from"./PlayersLine-628c0c55.js";import{T as _e}from"./TournamentName-d9d098a2.js";import{T as ue}from"./TeamName-33c9c422.js";import{T as pe}from"./TournamentResult-3ddb2bdb.js";const Be=I(""),$e=I(null),he=I({}),de=I(null),X=I(null);function Re(r){$e.set(r);const t={};for(const l of r.teams)for(const e of r.teams)t[`${l.team_name}	${e.team_name}`]={matches:[],wl:[0,0]};for(const l of r.team_matches){const e=`${l.winner_current_name}	${l.loser_current_name}`,n=`${l.loser_current_name}	${l.winner_current_name}`;t[e].wl[0]+=1,t[e].matches.push(l),t[n].wl[1]+=1,t[n].matches.push(l)}he.set(t)}function Pe(r,t,l){const e=r.teams.filter(f=>f.team_name==t).flatMap(f=>f.members),n=r.teams.filter(f=>f.team_name==l).flatMap(f=>f.members),a=be(r,e,n);de.set({left:{name:t,members:e},right:{name:l,members:n},column_width:Math.floor(100/(n.length+1)),member_relation:a}),X.set(null)}function qe(r,t,l){X.set({left:t,right:l,relation:r.member_relation[`${t}	${l}`]})}function be(r,t,l){const e={};for(const n of t)for(const a of l){const f=`${n}	${a}`;e[f]={matches:[],wl:[0,0],mix_teams:[]}}for(const n of r.member_matches)for(const a of t)for(const f of l){const o=`${a}	${f}`;n.winner_players.includes(a)&&n.loser_players.includes(f)&&(e[o].wl[0]+=1,e[o].matches.push(n)),n.winner_players.includes(f)&&n.loser_players.includes(a)&&(e[o].wl[1]+=1,e[o].matches.push(n))}for(const n of r.mix_teams)for(const a of t)for(const f of l)if(n.team_players.includes(a)&&n.team_players.includes(f)){const o=`${a}	${f}`;e[o].mix_teams.push(n)}return console.log(e),e}function Le(r,t){return`${r}	${t}`}function ee(r,t,l){const e=r.slice();return e[1]=t[l],e}function te(r){var O,S;let t,l=((O=r[0])==null?void 0:O.left)+"",e,n,a=((S=r[0])==null?void 0:S.right)+"",f,o,i,m,g,d,h,B,v,T,L,N,c;const p=[ge,ke],y=[];function R(s,$){return s[0].relation.matches.length>0?0:1}d=R(r),h=y[d]=p[d](r);let _=r[0].relation.mix_teams.length>0&&ne(r);return{c(){t=M("h2"),e=A(l),n=A(" \u{1F19A} "),f=A(a),o=P(),i=M("h3"),m=A("\u5BFE\u6226"),g=P(),h.c(),B=P(),v=M("h3"),T=A("\u540C\u4E00\u30C1\u30FC\u30E0\u51FA\u5834"),L=P(),_&&_.c(),N=J()},l(s){t=D(s,"H2",{});var $=H(t);e=C($,l),n=C($," \u{1F19A} "),f=C($,a),$.forEach(u),o=q(s),i=D(s,"H3",{});var j=H(i);m=C(j,"\u5BFE\u6226"),j.forEach(u),g=q(s),h.l(s),B=q(s),v=D(s,"H3",{});var G=H(v);T=C(G,"\u540C\u4E00\u30C1\u30FC\u30E0\u51FA\u5834"),G.forEach(u),L=q(s),_&&_.l(s),N=J()},m(s,$){E(s,t,$),b(t,e),b(t,n),b(t,f),E(s,o,$),E(s,i,$),b(i,m),E(s,g,$),y[d].m(s,$),E(s,B,$),E(s,v,$),b(v,T),E(s,L,$),_&&_.m(s,$),E(s,N,$),c=!0},p(s,$){var G,Z;(!c||$&1)&&l!==(l=((G=s[0])==null?void 0:G.left)+"")&&x(e,l),(!c||$&1)&&a!==(a=((Z=s[0])==null?void 0:Z.right)+"")&&x(f,a);let j=d;d=R(s),d===j?y[d].p(s,$):(U(),w(y[j],1,1,()=>{y[j]=null}),K(),h=y[d],h?h.p(s,$):(h=y[d]=p[d](s),h.c()),k(h,1),h.m(B.parentNode,B)),s[0].relation.mix_teams.length>0?_?(_.p(s,$),$&1&&k(_,1)):(_=ne(s),_.c(),k(_,1),_.m(N.parentNode,N)):_&&(U(),w(_,1,1,()=>{_=null}),K())},i(s){c||(k(h),k(_),c=!0)},o(s){w(h),w(_),c=!1},d(s){s&&u(t),s&&u(o),s&&u(i),s&&u(g),y[d].d(s),s&&u(B),s&&u(v),s&&u(L),_&&_.d(s),s&&u(N)}}}function ke(r){let t,l;return{c(){t=M("p"),l=A("-")},l(e){t=D(e,"P",{});var n=H(t);l=C(n,"-"),n.forEach(u)},m(e,n){E(e,t,n),b(t,l)},p:W,i:W,o:W,d(e){e&&u(t)}}}function ge(r){let t,l;return t=new ce({props:{matches:r[0].relation.matches,left:r[0].left}}),{c(){Q(t.$$.fragment)},l(e){Y(t.$$.fragment,e)},m(e,n){z(t,e,n),l=!0},p(e,n){const a={};n&1&&(a.matches=e[0].relation.matches),n&1&&(a.left=e[0].left),t.$set(a)},i(e){l||(k(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){F(t,e)}}}function ne(r){let t,l,e,n=r[0].relation.mix_teams,a=[];for(let o=0;o<n.length;o+=1)a[o]=ae(ee(r,n,o));const f=o=>w(a[o],1,1,()=>{a[o]=null});return{c(){t=M("table"),l=M("tbody");for(let o=0;o<a.length;o+=1)a[o].c()},l(o){t=D(o,"TABLE",{});var i=H(t);l=D(i,"TBODY",{});var m=H(l);for(let g=0;g<a.length;g+=1)a[g].l(m);m.forEach(u),i.forEach(u)},m(o,i){E(o,t,i),b(t,l);for(let m=0;m<a.length;m+=1)a[m].m(l,null);e=!0},p(o,i){if(i&1){n=o[0].relation.mix_teams;let m;for(m=0;m<n.length;m+=1){const g=ee(o,n,m);a[m]?(a[m].p(g,i),k(a[m],1)):(a[m]=ae(g),a[m].c(),k(a[m],1),a[m].m(l,null))}for(U(),m=n.length;m<a.length;m+=1)f(m);K()}},i(o){if(!e){for(let i=0;i<n.length;i+=1)k(a[i]);e=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)w(a[i]);e=!1},d(o){o&&u(t),oe(a,o)}}}function ae(r){let t,l,e,n,a,f,o,i,m,g,d,h,B,v,T,L,N;return e=new fe({props:{date:r[1].tournament_date}}),f=new _e({props:{name:r[1].tournament_name,key:r[1].tournament_key,official:!1}}),m=new ue({props:{name:r[1].team_name}}),h=new pe({props:{rank:r[1].team_rank}}),T=new ie({props:{players:r[1].team_players}}),{c(){t=M("tr"),l=M("td"),Q(e.$$.fragment),n=P(),a=M("td"),Q(f.$$.fragment),o=P(),i=M("td"),Q(m.$$.fragment),g=P(),d=M("td"),Q(h.$$.fragment),B=P(),v=M("td"),Q(T.$$.fragment),L=P(),this.h()},l(c){t=D(c,"TR",{});var p=H(t);l=D(p,"TD",{});var y=H(l);Y(e.$$.fragment,y),y.forEach(u),n=q(p),a=D(p,"TD",{class:!0});var R=H(a);Y(f.$$.fragment,R),R.forEach(u),o=q(p),i=D(p,"TD",{class:!0});var _=H(i);Y(m.$$.fragment,_),_.forEach(u),g=q(p),d=D(p,"TD",{});var O=H(d);Y(h.$$.fragment,O),O.forEach(u),B=q(p),v=D(p,"TD",{class:!0});var S=H(v);Y(T.$$.fragment,S),S.forEach(u),L=q(p),p.forEach(u),this.h()},h(){V(a,"class","tal"),V(i,"class","tal"),V(v,"class","tal")},m(c,p){E(c,t,p),b(t,l),z(e,l,null),b(t,n),b(t,a),z(f,a,null),b(t,o),b(t,i),z(m,i,null),b(t,g),b(t,d),z(h,d,null),b(t,B),b(t,v),z(T,v,null),b(t,L),N=!0},p(c,p){const y={};p&1&&(y.date=c[1].tournament_date),e.$set(y);const R={};p&1&&(R.name=c[1].tournament_name),p&1&&(R.key=c[1].tournament_key),f.$set(R);const _={};p&1&&(_.name=c[1].team_name),m.$set(_);const O={};p&1&&(O.rank=c[1].team_rank),h.$set(O);const S={};p&1&&(S.players=c[1].team_players),T.$set(S)},i(c){N||(k(e.$$.fragment,c),k(f.$$.fragment,c),k(m.$$.fragment,c),k(h.$$.fragment,c),k(T.$$.fragment,c),N=!0)},o(c){w(e.$$.fragment,c),w(f.$$.fragment,c),w(m.$$.fragment,c),w(h.$$.fragment,c),w(T.$$.fragment,c),N=!1},d(c){c&&u(t),F(e),F(f),F(m),F(h),F(T)}}}function ye(r){let t,l,e=r[0]&&te(r);return{c(){e&&e.c(),t=J()},l(n){e&&e.l(n),t=J()},m(n,a){e&&e.m(n,a),E(n,t,a),l=!0},p(n,[a]){n[0]?e?(e.p(n,a),a&1&&k(e,1)):(e=te(n),e.c(),k(e,1),e.m(t.parentNode,t)):e&&(U(),w(e,1,1,()=>{e=null}),K())},i(n){l||(k(e),l=!0)},o(n){w(e),l=!1},d(n){e&&e.d(n),n&&u(t)}}}function we(r,t,l){let e;return me(r,X,n=>l(0,e=n)),[e]}class Oe extends le{constructor(t){super();se(this,t,we,ye,re,{})}}export{Oe as M,$e as a,Re as b,Pe as c,Le as d,X as e,qe as f,Be as l,de as s,he as t};
