import{S as ae,i as ne,s as re,e as b,t as z,c as y,a as k,g as G,d as _,b as L,f as Y,F as c,h as se,M as oe,j as N,l as A,O as I,p as T,v as U,w as V,x as W,n as j,A as X,o as J,P as Z,k as fe,K as ke,m as Q}from"../../../chunks/vendor-183b23ac.js";import{a as Te}from"../../../chunks/index_store-bc6b09eb.js";import{b as ie}from"../../../chunks/paths-28a87002.js";import{s as ce}from"../../../chunks/util-f29b5fc7.js";import{T as Ee}from"../../../chunks/TournamentName-2fd546dc.js";import{T as we}from"../../../chunks/TeamName-53501aae.js";function De(n){let t,a,e;return{c(){t=b("a"),a=z(n[0]),this.h()},l(l){t=y(l,"A",{href:!0});var s=k(t);a=G(s,n[0]),s.forEach(_),this.h()},h(){L(t,"href",e=""+(ie+"/player/detail/?p="+ce(n[0])))},m(l,s){Y(l,t,s),c(t,a)},p(l,[s]){s&1&&se(a,l[0]),s&1&&e!==(e=""+(ie+"/player/detail/?p="+ce(l[0])))&&L(t,"href",e)},i:oe,o:oe,d(l){l&&_(t)}}}function je(n,t,a){let{player:e}=t;return n.$$set=l=>{"player"in l&&a(0,e=l.player)},[e]}class He extends ae{constructor(t){super();ne(this,t,je,De,re,{player:0})}}function he(n,t,a){const e=n.slice();return e[1]=t[a],e}function ue(n,t,a){const e=n.slice();return e[4]=t[a],e}function _e(n,t,a){const e=n.slice();return e[4]=t[a],e[8]=a,e}function me(n){let t,a,e,l,s,$,R,M,P,d,B,O,E,g,u,f,h,w,v,D,S,C=n[0].reversed_tournaments,m=[];for(let o=0;o<C.length;o+=1)m[o]=pe(_e(n,C,o));const be=o=>j(m[o],1,1,()=>{m[o]=null});let F=n[0].players,p=[];for(let o=0;o<F.length;o+=1)p[o]=$e(he(n,F,o));const ye=o=>j(p[o],1,1,()=>{p[o]=null});return{c(){t=b("table"),a=b("thead"),e=b("tr"),l=b("th"),s=N(),$=b("th"),R=z("\u53C2\u52A0\u5927\u4F1A#"),P=N(),d=b("tr"),B=b("th"),O=N(),E=b("th"),g=z("rating"),u=N();for(let o=0;o<m.length;o+=1)m[o].c();f=N(),h=b("th"),w=z("\u6700\u65B0\u30C1\u30FC\u30E0"),v=N(),D=b("tbody");for(let o=0;o<p.length;o+=1)p[o].c();this.h()},l(o){t=y(o,"TABLE",{style:!0});var i=k(t);a=y(i,"THEAD",{});var r=k(a);e=y(r,"TR",{});var H=k(e);l=y(H,"TH",{colspan:!0}),k(l).forEach(_),s=A(H),$=y(H,"TH",{colspan:!0,class:!0});var x=k($);R=G(x,"\u53C2\u52A0\u5927\u4F1A#"),x.forEach(_),H.forEach(_),P=A(r),d=y(r,"TR",{});var q=k(d);B=y(q,"TH",{style:!0}),k(B).forEach(_),O=A(q),E=y(q,"TH",{style:!0});var ee=k(E);g=G(ee,"rating"),ee.forEach(_),u=A(q);for(let K=0;K<m.length;K+=1)m[K].l(q);f=A(q),h=y(q,"TH",{class:!0});var te=k(h);w=G(te,"\u6700\u65B0\u30C1\u30FC\u30E0"),te.forEach(_),q.forEach(_),r.forEach(_),v=A(i),D=y(i,"TBODY",{});var le=k(D);for(let K=0;K<p.length;K+=1)p[K].l(le);le.forEach(_),i.forEach(_),this.h()},h(){L(l,"colspan","2"),L($,"colspan",M=n[0].reversed_tournaments.length+1),L($,"class","tal"),I(B,"width","10em"),I(E,"width","5em"),L(h,"class","tal"),I(t,"width","100%")},m(o,i){Y(o,t,i),c(t,a),c(a,e),c(e,l),c(e,s),c(e,$),c($,R),c(a,P),c(a,d),c(d,B),c(d,O),c(d,E),c(E,g),c(d,u);for(let r=0;r<m.length;r+=1)m[r].m(d,null);c(d,f),c(d,h),c(h,w),c(t,v),c(t,D);for(let r=0;r<p.length;r+=1)p[r].m(D,null);S=!0},p(o,i){if((!S||i&1&&M!==(M=o[0].reversed_tournaments.length+1))&&L($,"colspan",M),i&1){C=o[0].reversed_tournaments;let r;for(r=0;r<C.length;r+=1){const H=_e(o,C,r);m[r]?(m[r].p(H,i),T(m[r],1)):(m[r]=pe(H),m[r].c(),T(m[r],1),m[r].m(d,f))}for(Q(),r=C.length;r<m.length;r+=1)be(r);J()}if(i&1){F=o[0].players;let r;for(r=0;r<F.length;r+=1){const H=he(o,F,r);p[r]?(p[r].p(H,i),T(p[r],1)):(p[r]=$e(H),p[r].c(),T(p[r],1),p[r].m(D,null))}for(Q(),r=F.length;r<p.length;r+=1)ye(r);J()}},i(o){if(!S){for(let i=0;i<C.length;i+=1)T(m[i]);for(let i=0;i<F.length;i+=1)T(p[i]);S=!0}},o(o){m=m.filter(Boolean);for(let i=0;i<m.length;i+=1)j(m[i]);p=p.filter(Boolean);for(let i=0;i<p.length;i+=1)j(p[i]);S=!1},d(o){o&&_(t),Z(m,o),Z(p,o)}}}function pe(n){let t,a,e;return a=new Ee({props:{name:n[0].reversed_tournaments.length-n[8],key:n[4].tournament_key,official:!1}}),{c(){t=b("th"),U(a.$$.fragment),this.h()},l(l){t=y(l,"TH",{style:!0});var s=k(t);V(a.$$.fragment,s),s.forEach(_),this.h()},h(){I(t,"width","2em")},m(l,s){Y(l,t,s),W(a,t,null),e=!0},p(l,s){const $={};s&1&&($.name=l[0].reversed_tournaments.length-l[8]),s&1&&($.key=l[4].tournament_key),a.$set($)},i(l){e||(T(a.$$.fragment,l),e=!0)},o(l){j(a.$$.fragment,l),e=!1},d(l){l&&_(t),X(a)}}}function de(n){let t;return{c(){t=z("\u279C")},l(a){t=G(a,"\u279C")},m(a,e){Y(a,t,e)},d(a){a&&_(t)}}}function ge(n){let t,a=n[4].player_list.indexOf(n[1])!==-1,e=a&&de();return{c(){t=b("td"),e&&e.c()},l(l){t=y(l,"TD",{});var s=k(t);e&&e.l(s),s.forEach(_)},m(l,s){Y(l,t,s),e&&e.m(t,null)},p(l,s){s&1&&(a=l[4].player_list.indexOf(l[1])!==-1),a?e||(e=de(),e.c(),e.m(t,null)):e&&(e.d(1),e=null)},d(l){l&&_(t),e&&e.d()}}}function ve(n){let t,a;return t=new we({props:{name:n[0].player_info[n[1]].latest_team}}),{c(){U(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,l){W(t,e,l),a=!0},p(e,l){const s={};l&1&&(s.name=e[0].player_info[e[1]].latest_team),t.$set(s)},i(e){a||(T(t.$$.fragment,e),a=!0)},o(e){j(t.$$.fragment,e),a=!1},d(e){X(t,e)}}}function $e(n){let t,a,e,l,s,$=n[0].player_info[n[1]].rating.toLocaleString()+"",R,M,P,d,B,O;e=new He({props:{player:n[1]}});let E=n[0].reversed_tournaments,g=[];for(let f=0;f<E.length;f+=1)g[f]=ge(ue(n,E,f));let u=n[0].player_info[n[1]].latest_team!==n[0].team.name&&ve(n);return{c(){t=b("tr"),a=b("td"),U(e.$$.fragment),l=N(),s=b("td"),R=z($),M=N();for(let f=0;f<g.length;f+=1)g[f].c();P=N(),d=b("td"),u&&u.c(),B=N(),this.h()},l(f){t=y(f,"TR",{});var h=k(t);a=y(h,"TD",{class:!0});var w=k(a);V(e.$$.fragment,w),w.forEach(_),l=A(h),s=y(h,"TD",{});var v=k(s);R=G(v,$),v.forEach(_),M=A(h);for(let S=0;S<g.length;S+=1)g[S].l(h);P=A(h),d=y(h,"TD",{class:!0});var D=k(d);u&&u.l(D),D.forEach(_),B=A(h),h.forEach(_),this.h()},h(){L(a,"class","tal"),L(d,"class","tal nw")},m(f,h){Y(f,t,h),c(t,a),W(e,a,null),c(t,l),c(t,s),c(s,R),c(t,M);for(let w=0;w<g.length;w+=1)g[w].m(t,null);c(t,P),c(t,d),u&&u.m(d,null),c(t,B),O=!0},p(f,h){const w={};if(h&1&&(w.player=f[1]),e.$set(w),(!O||h&1)&&$!==($=f[0].player_info[f[1]].rating.toLocaleString()+"")&&se(R,$),h&1){E=f[0].reversed_tournaments;let v;for(v=0;v<E.length;v+=1){const D=ue(f,E,v);g[v]?g[v].p(D,h):(g[v]=ge(D),g[v].c(),g[v].m(t,P))}for(;v<g.length;v+=1)g[v].d(1);g.length=E.length}f[0].player_info[f[1]].latest_team!==f[0].team.name?u?(u.p(f,h),h&1&&T(u,1)):(u=ve(f),u.c(),T(u,1),u.m(d,null)):u&&(Q(),j(u,1,1,()=>{u=null}),J())},i(f){O||(T(e.$$.fragment,f),T(u),O=!0)},o(f){j(e.$$.fragment,f),j(u),O=!1},d(f){f&&_(t),X(e),Z(g,f),u&&u.d()}}}function Ne(n){let t,a,e=n[0]&&me(n);return{c(){e&&e.c(),t=fe()},l(l){e&&e.l(l),t=fe()},m(l,s){e&&e.m(l,s),Y(l,t,s),a=!0},p(l,[s]){l[0]?e?(e.p(l,s),s&1&&T(e,1)):(e=me(l),e.c(),T(e,1),e.m(t.parentNode,t)):e&&(Q(),j(e,1,1,()=>{e=null}),J())},i(l){a||(T(e),a=!0)},o(l){j(e),a=!1},d(l){e&&e.d(l),l&&_(t)}}}function Ae(n,t,a){let e;return ke(n,Te,l=>a(0,e=l)),[e]}class Pe extends ae{constructor(t){super();ne(this,t,Ae,Ne,re,{})}}export{Pe as default};
