import{g as v,y as S,D as x,r as M,G as C,H as N,o,c as r,A as B,u,t as a,E as g,d as l,a as L,b as V,w as q,F as A,e as F}from"./DFpHAwU8.js";import{q as H}from"./wOyVYUog.js";import{d as h}from"./nWiSO5pK.js";const b={class:"calendar"},E={key:0},j={key:1},G={style:{color:"yellowgreen"}},J={key:2,class:"event"},K={key:0,class:"m"},P={key:1,class:"m"},z=v({__name:"List",props:{day:{}},async setup(D){let c,y;const{data:w}=([c,y]=S(()=>x(()=>H("/topic").find(),"$9KyyrXfTBS")),c=await c,y(),c),{day:f}=D,k=()=>{if(f!==0&&!p.value)return[];const s=new Date,n=f*24*60*60*1e3,m=new Date(s.getTime()-n),t=new Date(s.getTime()+n);let e=[{topic:"",path:"",date:s,title:""}];for(const i of w.value)for(const d of i.dates)f!==0&&(new Date(d.date)<m||new Date(d.date)>t)||e.push({topic:i.title||"",path:i._path||"",title:d.title,date:new Date(d.date)});return e=e.sort((i,d)=>i.date<d.date?1:-1),e},T=s=>{if(!p)return"";const n=h(s.getTime(),new Date().getTime());return-2<=n&&n<=2?["一昨日","昨日","今日","明日","明後日"][n+2]:""},p=M(!1),_=C(()=>k());return N(()=>{p.value=!0}),(s,n)=>{const m=F;return o(!0),r(A,null,B(u(_),(t,e)=>(o(),r("div",b,[e===0||t.date.getMonth()!==u(_)[e-1].date.getMonth()?(o(),r("h3",E,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):g("",!0),e===0||("diffDays"in s?s.diffDays:u(h))(t.date.getTime(),u(_)[e-1].date.getTime())!==0?(o(),r("h4",j,[l(a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") ",1),L("span",G,a(T(t.date)),1)])):g("",!0),t.title!=""?(o(),r("div",J,[t.date.getHours()!==0||t.date.getMinutes()!==0?(o(),r("span",K,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(o(),r("span",P,"--:--")),l("   "),V(m,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:q(()=>[l(a(t.topic),1)]),_:2},1032,["to"]),l(" - "+a(t.title),1)])):g("",!0)]))),256)}}});export{z as _};
