import{g as v,r as w,G as _,M as b,V as E,o as h,c as O,W as c,E as S,a as k,X as I,F as $,C as T,u as C}from"./D_xzciyk.js";var p=Object.getOwnPropertySymbols,j=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable,B=(e,n)=>{var r={};for(var t in e)j.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&p)for(var t of p(e))n.indexOf(t)<0&&P.call(e,t)&&(r[t]=e[t]);return r},L=(e,n)=>{const r=e.__vccOpts||e;for(const[t,o]of n)r[t]=o;return r};const R=["ar","bn","cs","da","de","el","en","es","fa","fi","fil","fr","he","hi","hu","id","it","ja","ko","msa","nl","no","pl","pt","ro","ru","sv","th","tr","uk","ur","vi","zh-cn","zh-tw"],M=/^(https?:\/\/)?(www\.)?twitter\.com\/.*\/status(?:es)?\/(?<tweetId>[^\/\?]\d+)$/i,U=v({props:{tweetId:{type:String,default:""},tweetUrl:{type:String,default:""},conversation:{type:String,default:"all",validator:e=>["all","none"].includes(e)},cards:{type:String,default:"visible",validator:e=>["visible","hidden"].includes(e)},width:{type:[String,Number],default:"auto",validator:e=>typeof e=="string"?e==="auto":typeof e=="number"?e>=250&&e<=550:!1},align:{type:[String,void 0],default:void 0,validator:e=>["left","right","center",void 0].includes(e)},theme:{type:String,default:"light",validator:e=>["light","dark"].includes(e)},lang:{type:String,default:"en",validator:e=>R.includes(e)},dnt:{type:Boolean,default:!1}},emits:{"tweet-load-success":e=>!!e,"tweet-load-error":()=>!0},setup(e,{attrs:n,emit:r}){const t=w(!0),o=w(!1),d=w();_(()=>{u()}),b(e,()=>{u()});function u(){if(!(window.twttr&&window.twttr.ready)){g("https://platform.twitter.com/widgets.js",u);return}window.twttr.ready().then(({widgets:i})=>{t.value=!0,o.value=!1,d.value&&(d.value.innerHTML="");const{tweetId:s,tweetOptions:a}=m();i.createTweet(s,d.value,a).then(async l=>{await E(),l?r("tweet-load-success",l):(o.value=!0,r("tweet-load-error"))}).finally(()=>{t.value=!1})})}function m(){var i;let s=e,{tweetId:a,tweetUrl:l}=s,y=B(s,["tweetId","tweetUrl"]);if(a&&l)throw new Error("Cannot provide both tweet-id and tweet-url.");if(a){if(!/^\d+$/.test(a))throw new Error("Invalid tweet-id, please provide a valid numerical tweet-id.")}else if(l){const f=l.trim().match(M);if(f)a=(i=f.groups)==null?void 0:i.tweetId;else throw new Error("Invalid tweet-url.")}else throw new Error("Must provide either tweet-id or tweet-url.");return{tweetId:a,tweetOptions:y}}function g(i,s){const a=document.createElement("script");a.setAttribute("src",i),a.addEventListener("load",()=>s(),!1),document.body.appendChild(a)}return{tweetContainerRef:d,isLoading:t,hasError:o,attrs:n}}});function N(e,n,r,t,o,d){return h(),O($,null,[e.isLoading?c(e.$slots,"loading",{key:0}):e.hasError?c(e.$slots,"error",{key:1}):S("",!0),k("div",I({ref:"tweetContainerRef"},e.attrs),null,16)],64)}var V=L(U,[["render",N]]);const z=v({__name:"Xpost",props:{id:{}},setup(e){return(n,r)=>(h(),T(C(V),{"tweet-id":n.id,theme:"dark"},null,8,["tweet-id"]))}});export{z as default};
