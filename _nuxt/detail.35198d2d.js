import{_ as D,a as M,b as E}from"./client-only.e701b950.js";import{_ as B}from"./PlayerNaviLink.vue_vue_type_script_setup_true_lang.1e65d89e.js";import{_ as L,a as R}from"./MatchResult.vue_vue_type_script_setup_true_lang.4fe258bb.js";import{_ as V}from"./SocialAccounts.vue_vue_type_script_setup_true_lang.09bab32b.js";import{_ as A}from"./DateTime.vue_vue_type_script_setup_true_lang.dc419c13.js";import{_ as x}from"./TeamName.vue_vue_type_script_setup_true_lang.0e0010d5.js";import{a as N,o as _,e as r,h as y,t as d,p as v,q as s,f as t,F as C,r as g,v as S,w as T,u as m,x as q,b as I,y as j,z,A as K,s as O,c as H,B as b,C as G,D as J}from"./entry.ff056bd0.js";import{_ as F}from"./PlayersLine.vue_vue_type_script_setup_true_lang.3d37e308.js";import{_ as Q}from"./TournamentName.vue_vue_type_script_setup_true_lang.423f39ce.js";import"./composables.d23f5e28.js";import"./PlayerName.vue_vue_type_script_setup_true_lang.5a13496d.js";const U={key:0},W=t("span",{class:"muted"},"\u5927\u4F1A\u51FA\u5834\u540D: ",-1),X={key:1},Y=t("span",{class:"muted"},"ratings: ",-1),Z={key:2},tt=t("span",{class:"muted"},"url: ",-1),et=t("span",{class:"muted"},"\u30C1\u30FC\u30E0",-1),nt={class:"muted"},st=N({__name:"PlayerDetailInfo",props:{detail:null,resultsSum:null},setup(i){const $=k=>{const o={};for(const e of k.tournaments){const a=e.team_current_name;o[a]?(o[a].count+=1,o[a].lastMatchAt=Math.max(e.tournament_date,o[a].lastMatchAt)):o[a]={name:a,count:1,lastMatchAt:e.tournament_date}}return Object.values(o).sort(e=>-e.lastMatchAt)};return(k,o)=>{var c,l,n,h,f;const e=L,a=V,p=A,u=x;return _(),r("ul",null,[((l=(c=i.detail.data)==null?void 0:c.aliases)==null?void 0:l.length)>0?(_(),r("li",U,[W,y(" "+d(i.detail.data.aliases.join(", ")),1)])):v("",!0),s(e,{resultsSum:i.resultsSum},null,8,["resultsSum"]),i.detail.player.rating?(_(),r("li",X,[Y,y(" "+d(i.detail.player.rating.toLocaleString()),1)])):v("",!0),i.detail.data?(_(),r("li",Z,[tt,s(a,{twitter:(n=i.detail.data)==null?void 0:n.twitter,youtube:(h=i.detail.data)==null?void 0:h.youtube,twitch:(f=i.detail.data)==null?void 0:f.twitch},null,8,["twitter","youtube","twitch"])])):v("",!0),t("li",null,[et,t("ul",null,[(_(!0),r(C,null,g($(i.detail),w=>(_(),r("li",{key:w.name},[t("span",nt,[s(p,{date:w.lastMatchAt,spacing:!0},null,8,["date"])]),y("\xA0 "),s(u,{name:w.name,currentName:w.name},null,8,["name","currentName"]),y(" ("+d(w.count)+") ",1)]))),128))])])])}}}),at={class:"ti tal",style:{width:"7em"}},lt={class:"ti tar",style:{width:"3em","padding-right":"4px"}},ot={class:"ti",style:{width:"32em"}},ct=["href","onClick"],it={class:"ti",style:{width:"18em"}},ut={class:"ti",style:{width:"36em"}},_t={class:"ti",style:{width:"12em"}},rt=t("span",{class:"muted"},"\u{1F4C8}",-1),mt={class:"muted"},dt=N({__name:"PlayerDetailTournaments",props:{detail:null},setup(i){const{$containerClass:$}=S(),k=e=>{var a;(a=document.getElementById(e))==null||a.scrollIntoView()},o=e=>e==null?"-":e.toLocaleString();return(e,a)=>{const p=A,u=D,c=x,l=F;return _(!0),r(C,null,g(i.detail.tournaments,(n,h)=>(_(),r("div",{class:T(["tc",m($)(h)]),key:n.tournament_key},[t("div",at,[s(p,{date:n.tournament_date,spacing:!0},null,8,["date"])]),t("div",lt,[s(u,{rank:n.team_result},null,8,["rank"])]),t("div",ot,[t("a",{href:`#${n.tournament_key}`,onClick:[a[0]||(a[0]=q((...f)=>e.linkClick&&e.linkClick(...f),["prevent","stop"])),f=>k(n.tournament_key)]},d(n.tournament_name),9,ct)]),t("div",it,[s(c,{name:n.team_name,currentName:n.team_current_name},null,8,["name","currentName"])]),t("div",ut,[s(l,{names:n.mate_list},null,8,["names"])]),t("div",_t,[rt,y(" "+d(o(n.rating))+" ",1),t("span",mt,"("+d(o(n.rank))+"\u4F4D / "+d(o(n.total))+"\u4EBA)",1)])],2))),128)}}}),pt=["id"],ht=t("span",{class:"muted"},"\u958B\u50AC\u65E5: ",-1),yt=t("span",{class:"muted"},"\u30C1\u30FC\u30E0: ",-1),$t=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC: ",-1),kt=t("span",{class:"muted"},"\u7D50\u679C: ",-1),ft={class:"ti",style:{width:"8em"}},wt=t("span",{class:"muted"},"r: ",-1),vt={class:"ti tac",style:{width:"2em"}},Ct={class:"ti tac",style:{width:"4em"}},gt={class:"ti",style:{width:"24em"}},Nt={class:"ti",style:{width:"4em"}},Dt={class:"ti",style:{width:"48em"}},At=N({__name:"PlayerDetailMatches",props:{detail:null},setup(i){const{$containerClass:$}=S();return(k,o)=>{const e=Q,a=A,p=x,u=F,c=R;return _(!0),r(C,null,g(i.detail.tournaments,l=>(_(),r("div",{key:l.tournament_key},[t("h3",{id:l.tournament_key},[s(e,{tournamentKey:l.tournament_key,name:l.tournament_name},null,8,["tournamentKey","name"])],8,pt),t("ul",null,[t("li",null,[ht,s(a,{date:l.tournament_date,spacing:!1},null,8,["date"])]),t("li",null,[yt,s(p,{name:l.team_name,currentName:l.team_current_name},null,8,["name","currentName"])]),t("li",null,[$t,y(" "+d(l.member_name)+", ",1),s(u,{names:l.mate_list},null,8,["names"])]),t("li",null,[kt,s(D,{rank:l.team_result},null,8,["rank"])])]),(_(!0),r(C,null,g(i.detail.matches.filter(n=>n.tnmt_key===l.tournament_key),(n,h)=>(_(),r("div",{class:T(["tc",m($)(h)]),key:`${n.bracket}_${n.round}`},[t("div",ft,[y(d(n.bracket)+" ",1),wt,y(d(n.round),1)]),t("div",vt,[s(c,{win:n.wl},null,8,["win"])]),t("div",Ct,d(n.score_text),1),t("div",gt,[s(p,{name:n.opponent_team_name,currentName:n.opponent_team_current_name},null,8,["name","currentName"])]),t("div",Nt,[s(D,{rank:n.opponent_team_rank},null,8,["rank"])]),t("div",Dt,[s(u,{names:n.opponents_list},null,8,["names"])])],2))),128))]))),128)}}}),xt={key:0},St=t("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Tt={key:1},bt=t("h2",null,"\u8A66\u5408\u7D50\u679C",-1),zt=N({__name:"detail",setup(i){const{$host:$,$ratingClass:k}=S(),o=I(),e=j(null),a=()=>{$fetch(`${$()}/player/${o.query.p}.json`).then(u=>{for(const c of u.matches)c.wl=c.opponent_team_key===c.loser_key,c.score_text=c.wl?`${c.winner_score} - ${c.loser_score}`:`${c.loser_score} - ${c.winner_score}`;e.value=u})},p=z(()=>{if(e.value)return G(e.value.matches.map(u=>({key:u.tnmt_key,wl:u.wl===!0})),e.value.tournaments.map(u=>({key:u.tournament_key,result:u.team_result})),J.value)});return K(()=>o.query,async()=>{e.value=null,await a()}),O(o.path),a(),(u,c)=>{const l=E,n=B,h=st,f=dt,w=At,P=M;return _(),r("div",null,[m(e)?(_(),H(P,{key:0},{fallback:b(()=>[]),default:b(()=>[s(l,{title:`${m(e).player.collated_name}: \u6226\u7E3E`},null,8,["title"]),t("h1",{class:T(m(k)(m(e).player.rating))},d(m(e).player.collated_name),3),s(n,{current:"detail",p:m(o).query.p},null,8,["p"]),s(h,{detail:m(e),resultsSum:m(p)},null,8,["detail","resultsSum"]),m(e).tournaments.length>0?(_(),r("div",xt,[St,s(f,{detail:m(e)},null,8,["detail"])])):v("",!0),m(e).tournaments.length>0?(_(),r("div",Tt,[bt,s(w,{detail:m(e)},null,8,["detail"])])):v("",!0)]),_:1})):v("",!0)])}}});export{zt as default};
