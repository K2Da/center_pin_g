import{_ as C,a as D}from"./BrVu_XwN.js";import{t as M,_ as R}from"./cQ6VGsiq.js";import{_ as q}from"./DOcmuN3H.js";import{_ as K}from"./44XiZAye.js";import{_ as O}from"./CXDbGe-a.js";import{_ as P}from"./CzErzTDB.js";import{g as V,x as F,y as H,H as b,o as s,c as l,a as o,J as L,i as r,F as g,r as $,t as T,b as p,l as x,D as k,d as w,k as j,m as z,K as E,w as J,j as A}from"./BVlbEEgz.js";import{_ as G}from"./FtztNYa4.js";import{s as I}from"./Dpdce5FE.js";import"./CjYCUtxI.js";const Q=o("h2",null,"出場メンバー",-1),U={style:{"overflow-y":"scroll"}},W=o("th",{style:{width:"12em"}},null,-1),X=o("th",{class:"tal",style:{width:"12em"}},"前チーム",-1),Y=o("th",{class:"tal nw",style:{width:"12em"}},"最新チーム",-1),Z={class:"tal"},ee={class:"tal"},te=["src"],ne={class:"tal"},ae={key:0},se=V({__name:"Member",props:{detail:{}},setup(S){const{detail:c}=S,_=F(),{players:h}=H(_),i=b(()=>c.tournaments.slice().reverse()),y=b(()=>{var u;const n={};if(h.value)for(const t of c.players)n[t]=((u=h.value.filter(a=>a.name===t)[0])==null?void 0:u.latest.team_current)||"",n[t]===c.team.name&&(n[t]="");return n}),N=b(()=>{const n={};for(const t of c.players){n[t]=[];for(const[a,d]of i.value.entries())d.player_list.indexOf(t)!==-1&&n[t].push(a)}const u={};for(const t of c.players){u[t]=[];for(let a=0;a<i.value.length;a++){const d=n[t];let f="";const v=Math.min(...d),e=Math.max(...d),m=a===i.value.length-1;d.includes(a)?d.length===1?f=m?"one":"spot":v===a?f="start":e===a?f=m?"current":"end":f="on":v<a&&a<e&&(f="off"),u[t].push(f)}}return u});return(n,u)=>{const t=q,a=K,d=O,f=P,v=C;return s(),l(g,null,[Q,o("div",U,[o("table",{style:L({width:`${24+3*r(i).length+12+2}em`})},[o("thead",null,[o("tr",null,[W,X,(s(!0),l(g,null,$(r(i),(e,m)=>(s(),l("th",{class:"tac",style:{width:"3em","padding-left":"0","padding-right":"0","margin-left":"0","margin-right":"0"},key:m},T(m+1),1))),128)),Y])]),o("tbody",null,[(s(!0),l(g,null,$(n.detail.players,e=>(s(),l("tr",{key:e},[o("td",Z,[p(t,{name:e,page:"member"},null,8,["name"])]),o("td",ee,[n.detail.previous_teams[e]?(s(),x(a,{key:0,name:n.detail.previous_teams[e],currentName:n.detail.previous_teams[e],page:"member"},null,8,["name","currentName"])):k("",!0)]),(s(!0),l(g,null,$(r(N)[e],(m,B)=>(s(),l("td",{key:B,class:"tight"},[m!==""?(s(),l("img",{key:0,src:`/parts/${m}.svg`,style:{width:"3em",height:"2em"}},null,8,te)):k("",!0)]))),128)),o("td",ne,[r(y)[e]?(s(),l("span",ae,[r(y)[e]?(s(),x(a,{key:0,name:r(y)[e],currentName:r(y)[e],page:"member"},null,8,["name","currentName"])):k("",!0)])):k("",!0)])]))),128))])],4),o("ul",null,[(s(!0),l(g,null,$(r(i),(e,m)=>(s(),l("li",{key:m},[w(T(m+1)+". ",1),p(d,{date:e.tournament_date,spacing:!0},null,8,["date"]),w("   "),p(f,{name:e.tournament_name,tournamentKey:e.tournament_key},null,8,["name","tournamentKey"]),w("   ("),p(v,{rank:e.result},null,8,["rank"]),w(") ")]))),128))])])],64)}}}),pe=V({__name:"member",setup(S){const c=j(),_=z(null),h=()=>{$fetch(`${A()}/team/${c.query.m}`).then(i=>{_.value=M(i)})};return E(()=>c.query,async()=>{_.value=null,await h()}),I(c.path),h(),(i,y)=>{const N=D,n=R,u=se,t=G;return s(),l("div",null,[r(_)?(s(),x(t,{key:0},{default:J(()=>[p(N,{title:`${r(_).team.name}: 編成`},null,8,["title"]),o("h1",null,T(r(_).team.name),1),p(n,{current:"member",m:r(c).query.m},null,8,["m"]),p(u,{detail:r(_)},null,8,["detail"])]),_:1})):k("",!0)])}}});export{pe as default};
