import{_ as T,a as A,b as M}from"./client-only.e701b950.js";import{_ as q}from"./PlayerNaviLink.vue_vue_type_script_setup_true_lang.1e65d89e.js";import{_ as E}from"./PlayerName.vue_vue_type_script_setup_true_lang.5a13496d.js";import{_ as O}from"./TeamName.vue_vue_type_script_setup_true_lang.0e0010d5.js";import{_ as V}from"./DateTime.vue_vue_type_script_setup_true_lang.dc419c13.js";import{_ as z}from"./TournamentName.vue_vue_type_script_setup_true_lang.423f39ce.js";import{a as D,z as $,J as C,o as l,e as o,f as u,N as R,u as s,F as y,r as N,t as x,q as p,p as b,c as F,h as g,v as S,b as j,y as K,A as L,s as H,B,w as J}from"./entry.ff056bd0.js";import"./composables.d23f5e28.js";const G=u("h2",null,"\u51FA\u5834\u30E1\u30F3\u30D0\u30FC",-1),I={style:{"overflow-y":"scroll"}},Q=u("th",null,null,-1),U=u("th",{class:"tal nw",style:{width:"12em"}},"\u6700\u65B0\u30C1\u30FC\u30E0",-1),W={class:"tal"},X=["src"],Y={class:"tal"},Z={key:0},ee=D({__name:"PlayerDetailMember",props:{detail:null},setup(w){const{detail:k}=w,d=$(()=>k.tournaments.slice().reverse()),_=$(()=>{var r;const e={};if(C.value)for(const n of h.value)e[n]=((r=C.value.filter(t=>t.name===n)[0])==null?void 0:r.latest.team_current)||"";return e}),f=$(()=>{const e={};for(const n of h.value){e[n]=[];for(const[t,c]of d.value.entries())c.mate_list.indexOf(n)!==-1&&e[n].push(t)}const r={};for(const n of h.value){r[n]=[];for(let t=0;t<d.value.length;t++){const c=e[n];let i="";const v=Math.min(...c),a=Math.max(...c),m=t===d.value.length-1;c.includes(t)?c.length===1?i=m?"one":"spot":v===t?i="start":a===t?i=m?"current":"end":i="on":v<t&&t<a&&(i="off"),r[n].push(i)}}return r}),h=$(()=>{const e={};for(const[r,n]of k.tournaments.entries())for(const t of n.mate_list)e[t]?e[t]=[Math.min(e[t][0],r),e[t][1]+1]:e[t]=[r,1];return Object.keys(e).sort((r,n)=>e[r][0]===e[n][0]?e[n][1]-e[r][1]:e[r][0]-e[n][0])});return(e,r)=>{const n=E,t=O,c=V,i=z,v=T;return l(),o(y,null,[G,u("div",I,[u("table",{style:R({width:`${14+3*s(d).length+12}em`})},[u("thead",null,[u("tr",null,[Q,(l(!0),o(y,null,N(s(d),(a,m)=>(l(),o("th",{class:"tac",style:{width:"3em","padding-left":"0","padding-right":"0","margin-left":"0","margin-right":"0"},key:m},x(m+1),1))),128)),U])]),u("tbody",null,[(l(!0),o(y,null,N(s(h),a=>(l(),o("tr",{key:a},[u("td",W,[p(n,{name:a,page:"member"},null,8,["name"])]),(l(!0),o(y,null,N(s(f)[a],(m,P)=>(l(),o("td",{key:P,class:"tight"},[m!==""?(l(),o("img",{key:0,src:`/parts/${m}.svg`,style:{width:"3em",height:"2em"}},null,8,X)):b("",!0)]))),128)),u("td",Y,[s(_)[a]?(l(),o("span",Z,[s(_)[a]?(l(),F(t,{key:0,name:s(_)[a],currentName:s(_)[a],page:"member"},null,8,["name","currentName"])):b("",!0)])):b("",!0)])]))),128))])],4),u("ul",null,[(l(!0),o(y,null,N(s(d),(a,m)=>(l(),o("li",{key:m},[g(x(m+1)+". ",1),p(c,{date:a.tournament_date,spacing:!0},null,8,["date"]),g(" \xA0 "),p(i,{name:a.tournament_name,tournamentKey:a.tournament_key},null,8,["name","tournamentKey"]),g(" / "),p(t,{name:a.team_name,currentName:a.team_current_name},null,8,["name","currentName"]),g(" \xA0 ("),p(v,{rank:a.team_result},null,8,["rank"]),g(") ")]))),128))])])],64)}}}),me=D({__name:"member",setup(w){const{$host:k,$ratingClass:d}=S(),_=j(),f=K(null),h=()=>{$fetch(`${k()}/player/${_.query.p}.json`).then(e=>{f.value=e})};return L(()=>_.query,async()=>{f.value=null,await h()}),H(_.path),h(),(e,r)=>{const n=M,t=q,c=ee,i=A;return l(),o("div",null,[s(f)?(l(),F(i,{key:0},{fallback:B(()=>[]),default:B(()=>[p(n,{title:`${s(f).player.collated_name}: \u7DE8\u6210`},null,8,["title"]),u("h1",{class:J(s(d)(s(f).player.rating))},x(s(f).player.collated_name),3),p(t,{current:"member",p:s(_).query.p},null,8,["p"]),p(c,{detail:s(f)},null,8,["detail"])]),_:1})):b("",!0)])}}});export{me as default};
