import{g as S,y as x,D as C,r as M,G as N,H as B,o as s,c as o,F as h,A as L,u as l,t as a,E as y,d as u,a as V,b as q,w as A,e as F}from"./DD7SQoTe.js";import{q as b}from"./Dru7Lpt9.js";import{d as D}from"./28i8oFqO.js";const E={class:"calendar"},H={key:0},j={key:1},G={style:{color:"yellowgreen"}},J={key:2,class:"event"},K={key:0,class:"m"},P={key:1,class:"m"},z=S({__name:"List",props:{day:{}},async setup(w){let c,g;const{data:k}=([c,g]=x(()=>C(()=>b("/topic").find(),"$9KyyrXfTBS")),c=await c,g(),c),{day:f}=w,T=()=>{if(f!==0&&!p.value)return[];const n=new Date,r=f*24*60*60*1e3,m=new Date(n.getTime()-r),t=new Date(n.getTime()+r);let e=[{topic:"",path:"",date:n,title:""}];for(const i of k.value)for(const d of i.dates)f!==0&&(new Date(d.date)<m||new Date(d.date)>t)||e.push({topic:i.title||"",path:i._path||"",title:d.title,date:new Date(d.date)});return e=e.sort((i,d)=>i.date<d.date?1:-1),e},v=n=>{if(!p)return"";const r=D(n.getTime(),new Date().getTime());return-2<=r&&r<=2?["一昨日","昨日","今日","明日","明後日"][r+2]:""},p=M(!1),_=N(()=>T());return B(()=>{p.value=!0}),(n,r)=>{const m=F;return s(),o("div",E,[(s(!0),o(h,null,L(l(_),(t,e)=>(s(),o(h,null,[e===0||t.date.getMonth()!==l(_)[e-1].date.getMonth()?(s(),o("h3",H,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):y("",!0),e===0||("diffDays"in n?n.diffDays:l(D))(t.date.getTime(),l(_)[e-1].date.getTime())!==0?(s(),o("h4",j,[u(a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") ",1),V("span",G,a(v(t.date)),1)])):y("",!0),t.title!=""?(s(),o("div",J,[t.date.getSeconds()!==1?(s(),o("span",K,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(s(),o("span",P,"--:--")),u("   "),q(m,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:A(()=>[u(a(t.topic),1)]),_:2},1032,["to"]),u(" - "+a(t.title),1)])):y("",!0)],64))),256))])}}});export{z as _};
