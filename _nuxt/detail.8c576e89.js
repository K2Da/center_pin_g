import{_ as B,a as E,b}from"./client-only.730e02ed.js";import{t as P,_ as M}from"./team.827cced3.js";import{_ as V}from"./DateSpan.vue_vue_type_script_setup_true_lang.d26e2380.js";import{c as L,_ as O,a as j,l as q}from"./qeuryWatcher.d362a447.js";import{_ as z}from"./Name.vue_vue_type_script_setup_true_lang.dc620888.js";import{a as T,y as H,z as I,G as N,o as c,b as _,f as v,t as y,D as x,e,m as n,u as t,F as w,h as C,w as K,E as G,j as A,r as S,l as Q,c as J,H as U,O as W}from"./entry.c14f5ebc.js";import{_ as F}from"./ToggleButton.vue_vue_type_script_setup_true_lang.b1561a59.js";import{_ as X}from"./DateTime.vue_vue_type_script_setup_true_lang.6636f931.js";import{_ as Y}from"./Name.vue_vue_type_script_setup_true_lang.454fab61.js";import{_ as R}from"./PlayersLine.vue_vue_type_script_setup_true_lang.3a409c79.js";import{_ as Z}from"./Name.vue_vue_type_script_setup_true_lang.9c756b1a.js";import{s as tt,c as et}from"./helpers.be1e473b.js";import{s as nt}from"./ga.87d72440.js";import"./composables.281940ba.js";const st={key:0},at=e("span",{class:"muted"},"\u5927\u4F1A\u767B\u9332\u30C1\u30FC\u30E0\u540D: ",-1),ot=e("span",{class:"muted"},"\u6D3B\u52D5\u671F\u9593: ",-1),lt=e("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC(\u51FA\u5834\u56DE\u6570): ",-1),it={class:"muted"},ut=T({__name:"Info",props:{detail:null},setup(s){const{detail:i}=s,o=H(),{tournaments:l}=I(o),h=N(()=>{if(i)return L(i.matches.map(a=>({key:a.tnmt_key,wl:a.wl===!0})),i.tournaments.map(a=>({key:a.tournament_key,result:a.result})),l.value)}),d=(a,r)=>a.slice().sort((m,p)=>r[p].count-r[m].count);return(a,r)=>{var $,u,g;const m=V,p=O,f=z;return c(),_("ul",null,[((u=($=s.detail.info)==null?void 0:$.aliases)==null?void 0:u.length)>0?(c(),_("li",st,[at,v(" "+y((g=s.detail.info)==null?void 0:g.aliases.join(", ")),1)])):x("",!0),e("li",null,[ot,n(m,{date1:s.detail.team.first_tournament_date,date2:s.detail.team.latest_tournament_date},null,8,["date1","date2"])]),n(p,{resultsSum:t(h)},null,8,["resultsSum"]),e("li",null,[lt,(c(!0),_(w,null,C(d(s.detail.players,s.detail.playerStats),(k,D)=>(c(),_("span",{key:k},[D!==0?(c(),_(w,{key:0},[v(", ")],64)):x("",!0),n(f,{name:k},null,8,["name"]),e("span",it,"("+y(s.detail.playerStats[k].count)+")",1)]))),128))])])}}}),ct={class:"ti",style:{width:"8em"}},mt=e("span",{class:"muted"},"r: ",-1),_t={class:"ti tac",style:{width:"2em"}},rt={class:"ti tac",style:{width:"4em"}},dt={class:"ti",style:{width:"24em"}},pt={class:"ti",style:{width:"4em"}},ht={class:"ti",style:{width:"48em"}},ft=T({__name:"Matches",props:{detail:null,tournament:null,index:null,show:{type:Boolean}},setup(s){const{detail:i,tournament:o,index:l,show:h}=s,d=i.matches.filter(a=>a.tnmt_key===o.tournament_key);return(a,r)=>{const m=j,p=Z,f=B,$=R;return c(!0),_(w,null,C(t(d),(u,g)=>K((c(),_("div",{class:A(["stc",t(tt)(g,s.index,t(d).length)]),key:`${u.bracket}_${u.round}`,style:{"margin-left":"0.5em",width:"calc(100% - 0.5em)"}},[e("div",ct,[v(y(u.bracket)+" ",1),mt,v(y(u.round),1)]),e("div",_t,[n(m,{win:u.wl},null,8,["win"])]),e("div",rt,y(u.score_text),1),e("div",dt,[n(p,{name:u.opponent_team_name,currentName:u.opponent_team_current_name},null,8,["name","currentName"])]),e("div",pt,[n(f,{rank:u.opponent_team_rank},null,8,["rank"])]),e("div",ht,[n($,{names:u.opponents_list},null,8,["names"])])],2)),[[G,s.show]])),128)}}}),yt={class:"ti",style:{width:"2em","padding-left":"0.5em"}},$t={class:"ti tal",style:{width:"7em"}},gt={class:"ti tar",style:{width:"3em","padding-right":"4px"}},wt={class:"ti",style:{width:"32em"}},kt={class:"ti",style:{width:"24em"}},vt={class:"ti",style:{width:"36em"}},Tt=T({__name:"Tournament",props:{detail:null,tournament:null,i:null,openAll:{type:Boolean}},setup(s){const i=s,{detail:o,tournament:l,i:h}=i,d=S(!1),a=m=>{d.value=m},r=N(()=>d.value||i.openAll);return(m,p)=>{const f=F,$=X,u=B,g=Y,k=R,D=ft;return c(),_(w,null,[e("div",yt,[n(f,{id:`tournaments-toggle-${t(h)}`,value:!1,onToggle:a},null,8,["id"])]),e("div",$t,[n($,{date:t(l).tournament_date,spacing:!0},null,8,["date"])]),e("div",gt,[n(u,{rank:t(l).result},null,8,["rank"])]),e("div",wt,[n(g,{name:t(l).tournament_name,tournamentKey:t(l).tournament_key},null,8,["name","tournamentKey"])]),e("div",kt,y(t(l).name),1),e("div",vt,[n(k,{names:t(l).player_list},null,8,["names"])]),n(D,{detail:t(o),tournament:t(l),index:t(h),show:t(r)},null,8,["detail","tournament","index","show"])],64)}}}),xt={style:{padding:"0 0 0.2em 0.5em"}},Dt=e("span",null,"All",-1),Ct=T({__name:"Tournaments",props:{detail:null},setup(s){const i=S(!1),o=l=>{i.value=l};return(l,h)=>{const d=F,a=Tt;return c(),_(w,null,[e("div",xt,[n(d,{id:"tournaments-all-toggle",value:!1,onToggle:o}),v(),Dt]),(c(!0),_(w,null,C(s.detail.tournaments,(r,m)=>(c(),_("div",{class:A(["tc",t(et)(m)]),key:r.tournament_key},[n(a,{tournament:r,detail:s.detail,i:m,openAll:t(i)},null,8,["tournament","detail","i","openAll"])],2))),128))],64)}}}),St={key:0},Bt=e("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Ht=T({__name:"detail",setup(s){const i=Q(),o=S(null),l=async()=>{o.value=null,o.value=P(await $fetch(`${W()}/team/${i.query.m}.json`))};return nt(i.path),l(),q(l),(h,d)=>{const a=b,r=M,m=ut,p=Ct,f=E;return c(),_("div",null,[t(o)?(c(),J(f,{key:0},{default:U(()=>[n(a,{title:`${t(o).team.name}: \u6226\u7E3E`},null,8,["title"]),e("h1",null,y(t(o).team.name),1),n(r,{current:"detail",m:t(i).query.m},null,8,["m"]),n(m,{detail:t(o)},null,8,["detail"]),t(o).tournaments.length>0?(c(),_("div",St,[Bt,n(p,{detail:t(o)},null,8,["detail"])])):x("",!0)]),_:1})):x("",!0)])}}});export{Ht as default};
