import{g as v,y as x,D as M,r as C,G as N,o,c as n,A as B,u as c,t as s,E as _,d as u,a as L,b as V,w as q,F as A,e as F}from"./Dad8qJzO.js";import{q as b}from"./DYEkULYP.js";import{d as y}from"./CBTTjzau.js";const E={class:"calendar"},H={key:0},j={key:1},G={style:{color:"yellowgreen"}},J={key:2,class:"event"},K={key:0,class:"m"},P={key:1,class:"m"},z=v({__name:"List",props:{day:{}},async setup(h){let d,f;const{data:D}=([d,f]=x(()=>M(()=>b("/topic").find(),"$9KyyrXfTBS")),d=await d,f(),d),{day:p}=h,l=new Date,m=p*24*60*60*1e3,w=new Date(l.getTime()-m),k=new Date(l.getTime()+m);let r=[{topic:"",path:"",date:l,title:""}];for(const a of D.value)for(const e of a.dates)p!==0&&(new Date(e.date)<w||new Date(e.date)>k)||r.push({topic:a.title||"",path:a._path||"",title:e.title,date:new Date(e.date)});r=r.sort((a,e)=>a.date<e.date?1:-1);const T=a=>{if(!g)return"";const e=y(a.getTime(),new Date().getTime());return-2<=e&&e<=2?["一昨日","昨日","今日","明日","明後日"][e+2]:""},g=C(!1);return N(()=>{g.value=!0}),(a,e)=>{const S=F;return o(!0),n(A,null,B(c(r),(t,i)=>(o(),n("div",E,[i===0||t.date.getMonth()!==c(r)[i-1].date.getMonth()?(o(),n("h3",H,s(t.date.getFullYear())+"年 "+s(t.date.getMonth()+1)+"月 ",1)):_("",!0),i===0||("diffDays"in a?a.diffDays:c(y))(t.date.getTime(),c(r)[i-1].date.getTime())!==0?(o(),n("h4",j,[u(s(t.date.getDate())+"日 ("+s(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") ",1),L("span",G,s(T(t.date)),1)])):_("",!0),t.title!=""?(o(),n("div",J,[t.date.getHours()!==0||t.date.getMinutes()!==0?(o(),n("span",K,s(t.date.getHours().toString().padStart(2,"0"))+":"+s(t.date.getMinutes().toString().padStart(2,"0")),1)):(o(),n("span",P,"--:--")),u("   "),V(S,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:q(()=>[u(s(t.topic),1)]),_:2},1032,["to"]),u(" - "+s(t.title),1)])):_("",!0)]))),256)}}});export{z as _};
