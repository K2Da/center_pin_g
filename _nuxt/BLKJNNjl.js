import{g as S,y as v,D as M,r as C,G as T,o,c as s,A as L,u,t as a,E as _,d as l,b as N,w as q,F as A,e as B}from"./CAYU6l3t.js";import{q as F}from"./odjb-TZT.js";const V={class:"calendar"},b={key:0},E={key:1},H={key:2,class:"event"},j={key:0,class:"m"},G={key:1,class:"m"},P=S({__name:"List",props:{day:{}},async setup(m){let d,p;const{data:y}=([d,p]=v(()=>M(()=>F("/topic").find(),"$9KyyrXfTBS")),d=await d,p(),d),{day:f}=m,c=new Date,g=f*24*60*60*1e3,D=new Date(c.getTime()-g),w=new Date(c.getTime()+g);let r=[{topic:"",path:"",date:c,title:""}];for(const n of y.value)for(const e of n.dates)f!==0&&(new Date(e.date)<D||new Date(e.date)>w)||r.push({topic:n.title||"",path:n._path||"",title:e.title,date:new Date(e.date)});r=r.sort((n,e)=>n.date<e.date?1:-1);const k=n=>{if(!h)return"";const e=n.getDate()-c.getDate();return-2<=e&&e<=2?["一昨日","昨日","本日","明日","明後日"][e+2]:""},h=C(!1);return T(()=>{h.value=!0}),(n,e)=>{const x=B;return o(!0),s(A,null,L(u(r),(t,i)=>(o(),s("div",V,[i===0||t.date.getMonth()!==u(r)[i-1].date.getMonth()?(o(),s("h3",b,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):_("",!0),i===0||t.date.getDate()!==u(r)[i-1].date.getDate()?(o(),s("h4",E,a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") "+a(k(t.date)),1)):_("",!0),t.title!=""?(o(),s("div",H,[t.date.getHours()!==0&&t.date.getMinutes()!==0?(o(),s("span",j,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(o(),s("span",G,"--:--")),l("   "),N(x,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:q(()=>[l(a(t.topic),1)]),_:2},1032,["to"]),l(" - "+a(t.title),1)])):_("",!0)]))),256)}}});export{P as _};
