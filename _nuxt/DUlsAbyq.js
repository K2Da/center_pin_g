import{_ as S,a as V}from"./Dq6IOWnP.js";import{t as R,_ as q}from"./DO88T3jq.js";import{_ as D}from"./vDHrPC_X.js";import{_ as L}from"./CFrT3OeK.js";import{_ as O}from"./BOk4WJzy.js";import{_ as P}from"./Bzgazdn9.js";import{g as C,l as E,s as F,G as b,o as s,c as l,a as o,L as K,u as r,F as g,A as $,t as T,b as p,C as x,E as k,d as w,k as z,r as A,M as G,w as H,B as j}from"./r_Br9JDX.js";import{_ as I}from"./BpdQZSjj.js";import{s as J}from"./DPt1KTnx.js";import"./DI-1_VR9.js";import"./_uy2Xyg6.js";const Q=o("h2",null,"出場メンバー",-1),U={style:{"overflow-y":"scroll"}},W=o("th",{style:{width:"12em"}},null,-1),X=o("th",{class:"tal",style:{width:"12em"}},"前チーム",-1),Y=o("th",{class:"tal nw",style:{width:"12em"}},"最新チーム",-1),Z={class:"tal"},ee={class:"tal"},te=["src"],ne={class:"tal"},ae={key:0},se=C({__name:"Member",props:{detail:{}},setup(B){const{detail:c}=B,_=E(),{players:h}=F(_),i=b(()=>c.tournaments.slice().reverse()),y=b(()=>{var u;const n={};if(h.value)for(const t of c.players)n[t]=((u=h.value.filter(a=>a.name===t)[0])==null?void 0:u.latest.team_current)||"",n[t]===c.team.name&&(n[t]="");return n}),N=b(()=>{const n={};for(const t of c.players){n[t]=[];for(const[a,d]of i.value.entries())d.player_list.indexOf(t)!==-1&&n[t].push(a)}const u={};for(const t of c.players){u[t]=[];for(let a=0;a<i.value.length;a++){const d=n[t];let f="";const v=Math.min(...d),e=Math.max(...d),m=a===i.value.length-1;d.includes(a)?d.length===1?f=m?"one":"spot":v===a?f="start":e===a?f=m?"current":"end":f="on":v<a&&a<e&&(f="off"),u[t].push(f)}}return u});return(n,u)=>{const t=D,a=L,d=O,f=P,v=S;return s(),l(g,null,[Q,o("div",U,[o("table",{style:K({width:`${24+3*r(i).length+12+2}em`})},[o("thead",null,[o("tr",null,[W,X,(s(!0),l(g,null,$(r(i),(e,m)=>(s(),l("th",{class:"tac",style:{width:"3em","padding-left":"0","padding-right":"0","margin-left":"0","margin-right":"0"},key:m},T(m+1),1))),128)),Y])]),o("tbody",null,[(s(!0),l(g,null,$(n.detail.players,e=>(s(),l("tr",{key:e},[o("td",Z,[p(t,{name:e,page:"member"},null,8,["name"])]),o("td",ee,[n.detail.previous_teams[e]?(s(),x(a,{key:0,name:n.detail.previous_teams[e],currentName:n.detail.previous_teams[e],page:"member"},null,8,["name","currentName"])):k("",!0)]),(s(!0),l(g,null,$(r(N)[e],(m,M)=>(s(),l("td",{key:M,class:"tight"},[m!==""?(s(),l("img",{key:0,src:`/parts/${m}.svg`,style:{width:"3em",height:"2em"}},null,8,te)):k("",!0)]))),128)),o("td",ne,[r(y)[e]?(s(),l("span",ae,[r(y)[e]?(s(),x(a,{key:0,name:r(y)[e],currentName:r(y)[e],page:"member"},null,8,["name","currentName"])):k("",!0)])):k("",!0)])]))),128))])],4),o("ul",null,[(s(!0),l(g,null,$(r(i),(e,m)=>(s(),l("li",{key:m},[w(T(m+1)+". ",1),p(d,{date:e.tournament_date,spacing:!0},null,8,["date"]),w("   "),p(f,{name:e.tournament_name,tournamentKey:e.tournament_key},null,8,["name","tournamentKey"]),w("   ("),p(v,{rank:e.result},null,8,["rank"]),w(") ")]))),128))])])],64)}}}),he=C({__name:"member",setup(B){const c=z(),_=A(null),h=()=>{$fetch(`${j()}/team/${c.query.m}`).then(i=>{_.value=R(i)})};return G(()=>c.query,async()=>{_.value=null,await h()}),J(c.path),h(),(i,y)=>{const N=V,n=q,u=se,t=I;return s(),l("div",null,[r(_)?(s(),x(t,{key:0},{default:H(()=>[p(N,{title:`${r(_).team.name}: 編成`},null,8,["title"]),o("h1",null,T(r(_).team.name),1),p(n,{current:"member",m:r(c).query.m},null,8,["m"]),p(u,{detail:r(_)},null,8,["detail"])]),_:1})):k("",!0)])}}});export{he as default};
