import{_ as T}from"./PageHead.vue_vue_type_script_setup_true_lang.266edfbc.js";import{_ as w}from"./DateTime.vue_vue_type_script_setup_true_lang.4cbce08b.js";import{_ as D}from"./PlayersLine.vue_vue_type_script_setup_true_lang.cb70f208.js";import{a as v,o as u,e as c,r as k,v as C,f as t,q as o,h as y,t as r,w as g,F as $,z as x,p as f,u as b,D as B,E,x as N,b as S,y as A,A as P,s as V,c as j,B as q,C as I}from"./entry.20e481c2.js";import{_ as L}from"./TeamName.vue_vue_type_script_setup_true_lang.bdbb2d0e.js";import{a as M,_ as z}from"./MatchResult.vue_vue_type_script_setup_true_lang.8fc49c17.js";import{_ as K}from"./TournamentName.vue_vue_type_script_setup_true_lang.a279eaea.js";import{_ as O}from"./DateSpan.vue_vue_type_script_setup_true_lang.ecaa28c5.js";import{_ as R}from"./PlayerName.vue_vue_type_script_setup_true_lang.5071baf8.js";const H={class:"ti tal",style:{width:"7em"}},G={class:"ti tar",style:{width:"3em","padding-right":"4px"}},J=t("span",{class:"muted"},"\u4F4D",-1),Q={class:"ti",style:{width:"32em"}},U=["href","onClick"],W={class:"ti",style:{width:"24em"}},X={class:"ti",style:{width:"36em"}},Y=v({__name:"TeamDetailTournaments",props:{detail:null},setup(i){const h=m=>{var a;(a=document.getElementById(m))==null||a.scrollIntoView()};return(m,a)=>{const l=w,_=D;return u(!0),c($,null,k(i.detail.tournaments,(e,n)=>(u(),c("div",{class:C(["tc",[n%2===1?"tcb":"tca"]]),key:e.tournament_key},[t("div",H,[o(l,{date:e.tournament_date,spacing:!0},null,8,["date"])]),t("div",G,[y(r(e.result)+" ",1),J]),t("div",Q,[t("a",{href:`#${e.tournament_key}`,onClick:[a[0]||(a[0]=g((...s)=>m.linkClick&&m.linkClick(...s),["prevent","stop"])),s=>h(e.tournament_key)]},r(e.tournament_name),9,U)]),t("div",W,r(e.name),1),t("div",X,[o(_,{names:e.player_list},null,8,["names"])])],2))),128)}}}),Z=["id"],ee=t("span",{class:"muted"},"\u958B\u50AC\u65E5: ",-1),te=t("span",{class:"muted"},"\u30C1\u30FC\u30E0: ",-1),se=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC: ",-1),ne=t("span",{class:"muted"},"\u7D50\u679C: ",-1),ae=t("span",{class:"muted"},"\u4F4D",-1),le={class:"ti",style:{width:"8em"}},oe=t("span",{class:"muted"},"r: ",-1),ue={class:"ti tac",style:{width:"2em"}},ie={class:"ti tac",style:{width:"4em"}},ce={class:"ti",style:{width:"24em"}},_e={class:"ti",style:{width:"4em"}},re=t("span",{class:"muted"}," \u4F4D",-1),me={class:"ti",style:{width:"48em"}},de=v({__name:"TeamDetailMatches",props:{detail:null},setup(i){return(h,m)=>{const a=w,l=D,_=L;return u(!0),c($,null,k(i.detail.tournaments,e=>(u(),c("div",{key:e.tournament_key,style:{"border-bottom":"var(--border) 1px solid"}},[t("h3",{id:e.tournament_key},[o(K,{tournamentKey:e.tournament_key,name:e.tournament_name},null,8,["tournamentKey","name"])],8,Z),t("ul",null,[t("li",null,[ee,o(a,{date:e.tournament_date,spacing:!1},null,8,["date"])]),t("li",null,[te,y(" "+r(e.name),1)]),t("li",null,[se,o(l,{names:e.player_list},null,8,["names"])]),t("li",null,[ne,y(" "+r(e.result),1),ae])]),(u(!0),c($,null,k(i.detail.matches.filter(n=>n.tnmt_key===e.tournament_key),(n,s)=>(u(),c("div",{class:C(["tc",[s%2===1?"tcb":"tca"]]),key:`${n.bracket}_${n.round}`},[t("div",le,[y(r(n.bracket)+" ",1),oe,y(r(n.round),1)]),t("div",ue,[o(M,{win:n.wl},null,8,["win"])]),t("div",ie,r(n.score_text),1),t("div",ce,[o(_,{name:n.opponent_team_name,currentName:n.opponent_team_current_name},null,8,["name","currentName"])]),t("div",_e,[y(r(n.opponent_team_rank),1),re]),t("div",me,[o(l,{names:n.opponents_list},null,8,["names"])])],2))),128))]))),128)}}}),pe={key:0},he=t("span",{class:"muted"},"\u5927\u4F1A\u767B\u9332\u30C1\u30FC\u30E0\u540D: ",-1),ye=t("span",{class:"muted"},"\u6D3B\u52D5\u671F\u9593: ",-1),fe=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC(\u51FA\u5834\u56DE\u6570): ",-1),$e=y(", "),ke={class:"muted"},ve=v({__name:"TeamDetailInfo",props:{detail:null},setup(i){const{detail:h}=i,m=x(()=>{if(h)return B(h.matches.map(l=>({key:l.tnmt_key,wl:l.wl===!0})),h.tournaments.map(l=>({key:l.tournament_key,result:l.result})),E.value)}),a=(l,_)=>l.slice().sort((e,n)=>_[n].count-_[e].count);return(l,_)=>{var n,s,d;const e=O;return u(),c("ul",null,[((s=(n=i.detail.info)==null?void 0:n.aliases)==null?void 0:s.length)>0?(u(),c("li",pe,[he,y(" "+r((d=i.detail.info)==null?void 0:d.aliases.join(", ")),1)])):f("",!0),t("li",null,[ye,o(e,{date1:i.detail.team.first_tournament_date,date2:i.detail.team.latest_tournament_date},null,8,["date1","date2"])]),o(z,{resultsSum:b(m)},null,8,["resultsSum"]),t("li",null,[fe,(u(!0),c($,null,k(a(i.detail.players,i.detail.playerStats),(p,F)=>(u(),c("span",{key:p},[F!==0?(u(),c($,{key:0},[$e],64)):f("",!0),o(R,{name:p},null,8,["name"]),t("span",ke,"("+r(i.detail.playerStats[p].count)+")",1)]))),128))])])}}}),we={key:0},De=t("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Ce={key:1},Fe=t("h2",null,"\u8A66\u5408\u7D50\u679C",-1),Pe=v({__name:"detail",setup(i){const{$host:h}=N(),m=S(),a=A(null),l=()=>{$fetch(`${h()}/team/${m.query.m}.json`).then(_=>{for(const s of _.matches)s.wl=s.opponent_team_key===s.loser_key,s.score_text=s.wl?`${s.winner_score} - ${s.loser_score}`:`${s.loser_score} - ${s.winner_score}`;const e={};for(const[s,d]of _.tournaments.entries())for(const p of d.player_list)e[p]?e[p].count++:e[p]={tournament:s,count:1};const n=Object.keys(e);n.sort((s,d)=>e[s].tournament===e[d].tournament?e[d].count-e[s].count:e[s].tournament-e[d].tournament),a.value={..._,players:n,reversedTournaments:[],playerStats:e}})};return P(()=>m.query,async()=>{a.value=null,await l()}),V(m.path),l(),(_,e)=>{const n=T,s=Y,d=de,p=I;return u(),c("div",null,[a.value?(u(),j(p,{key:0},{default:q(()=>[o(n,{title:a.value.team.name},null,8,["title"]),t("h1",null,r(a.value.team.name),1),o(ve,{detail:a.value},null,8,["detail"]),a.value.tournaments.length>0?(u(),c("div",we,[De,o(s,{detail:a.value},null,8,["detail"])])):f("",!0),a.value.tournaments.length>0?(u(),c("div",Ce,[Fe,o(d,{detail:a.value},null,8,["detail"])])):f("",!0)]),_:1})):f("",!0)])}}});export{Pe as default};
