import{_ as S}from"./PageHead.vue_vue_type_script_setup_true_lang.266edfbc.js";import{_ as T,a as M}from"./MatchResult.vue_vue_type_script_setup_true_lang.8fc49c17.js";import{_ as P}from"./SocialAccounts.vue_vue_type_script_setup_true_lang.cd04d1d0.js";import{_ as D}from"./DateTime.vue_vue_type_script_setup_true_lang.4cbce08b.js";import{_ as N}from"./TeamName.vue_vue_type_script_setup_true_lang.bdbb2d0e.js";import{a as C,o as c,e as _,h as m,t as r,p as $,q as l,f as t,F as w,r as g,v as b,w as B,x as E,b as L,y as V,z as I,A as j,s as q,c as R,B as A,C as z,u as x,D as K,E as O}from"./entry.20e481c2.js";import{_ as F}from"./PlayersLine.vue_vue_type_script_setup_true_lang.cb70f208.js";import{_ as H}from"./TournamentName.vue_vue_type_script_setup_true_lang.a279eaea.js";import"./PlayerName.vue_vue_type_script_setup_true_lang.5071baf8.js";const G={key:0},J=t("span",{class:"muted"},"\u5927\u4F1A\u51FA\u5834\u540D: ",-1),Q={key:1},U=t("span",{class:"muted"},"ratings: ",-1),W={key:2},X=t("span",{class:"muted"},"url: ",-1),Y=t("span",{class:"muted"},"\u30C1\u30FC\u30E0",-1),Z={class:"muted"},tt=m("\xA0 "),et=C({__name:"PlayerDetailInfo",props:{detail:null,resultsSum:null},setup(u){const p=d=>{const n={};for(const e of d.tournaments){const i=e.team_current_name;n[i]?(n[i].count+=1,n[i].lastMatchAt=Math.max(e.tournament_date,n[i].lastMatchAt)):n[i]={name:i,count:1,lastMatchAt:e.tournament_date}}return Object.values(n).sort(e=>-e.lastMatchAt)};return(d,n)=>{var s,y,h,k,v;const e=T,i=P,o=D,a=N;return c(),_("ul",null,[((y=(s=u.detail.data)==null?void 0:s.aliases)==null?void 0:y.length)>0?(c(),_("li",G,[J,m(" "+r(u.detail.data.aliases.join(", ")),1)])):$("",!0),l(e,{resultsSum:u.resultsSum},null,8,["resultsSum"]),u.detail.player.rating?(c(),_("li",Q,[U,m(" "+r(u.detail.player.rating.toLocaleString()),1)])):$("",!0),u.detail.data?(c(),_("li",W,[X,l(i,{twitter:(h=u.detail.data)==null?void 0:h.twitter,youtube:(k=u.detail.data)==null?void 0:k.youtube,twitch:(v=u.detail.data)==null?void 0:v.twitch},null,8,["twitter","youtube","twitch"])])):$("",!0),t("li",null,[Y,t("ul",null,[(c(!0),_(w,null,g(p(u.detail),f=>(c(),_("li",{key:f.name},[t("span",Z,[l(o,{date:f.lastMatchAt,spacing:!0},null,8,["date"])]),tt,l(a,{name:f.name,currentName:f.name},null,8,["name","currentName"]),m(" ("+r(f.count)+") ",1)]))),128))])])])}}}),st=["id"],at=t("span",{class:"muted"},"\u958B\u50AC\u65E5: ",-1),nt=t("span",{class:"muted"},"\u30C1\u30FC\u30E0: ",-1),lt=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC: ",-1),ot=t("span",{class:"muted"},"\u7D50\u679C: ",-1),ut=t("span",{class:"muted"},"\u4F4D",-1),it={class:"ti",style:{width:"8em"}},ct=t("span",{class:"muted"},"r: ",-1),_t={class:"ti tac",style:{width:"2em"}},rt={class:"ti tac",style:{width:"4em"}},mt={class:"ti",style:{width:"24em"}},dt={class:"ti",style:{width:"4em"}},ht=t("span",{class:"muted"}," \u4F4D",-1),pt={class:"ti",style:{width:"48em"}},yt=C({__name:"PlayerDetailMatches",props:{detail:null},setup(u){return(p,d)=>{const n=D,e=N,i=F;return c(!0),_(w,null,g(u.detail.tournaments,o=>(c(),_("div",{key:o.tournament_key,style:{"border-bottom":"var(--border) 1px solid"}},[t("h3",{id:o.tournament_key},[l(H,{tournamentKey:o.tournament_key,name:o.tournament_name},null,8,["tournamentKey","name"])],8,st),t("ul",null,[t("li",null,[at,l(n,{date:o.tournament_date,spacing:!1},null,8,["date"])]),t("li",null,[nt,l(e,{name:o.team_name,currentName:o.team_current_name},null,8,["name","currentName"])]),t("li",null,[lt,m(" "+r(o.member_name)+", ",1),l(i,{names:o.mate_list},null,8,["names"])]),t("li",null,[ot,m(" "+r(o.team_result),1),ut])]),(c(!0),_(w,null,g(u.detail.matches.filter(a=>a.tnmt_key===o.tournament_key),(a,s)=>(c(),_("div",{class:b(["tc",[s%2===1?"tcb":"tca"]]),key:`${a.bracket}_${a.round}`},[t("div",it,[m(r(a.bracket)+" ",1),ct,m(r(a.round),1)]),t("div",_t,[l(M,{win:a.wl},null,8,["win"])]),t("div",rt,r(a.score_text),1),t("div",mt,[l(e,{name:a.opponent_team_name,currentName:a.opponent_team_current_name},null,8,["name","currentName"])]),t("div",dt,[m(r(a.opponent_team_rank),1),ht]),t("div",pt,[l(i,{names:a.opponents_list},null,8,["names"])])],2))),128))]))),128)}}}),$t={class:"ti tal",style:{width:"7em"}},ft={class:"ti tar",style:{width:"3em","padding-right":"4px"}},kt=t("span",{class:"muted"},"\u4F4D",-1),vt={class:"ti",style:{width:"32em"}},wt=["href","onClick"],gt={class:"ti",style:{width:"18em"}},Ct={class:"ti",style:{width:"36em"}},Dt={class:"ti",style:{width:"12em"}},Nt=t("span",{class:"muted"},"\u{1F4C8}",-1),bt={class:"muted"},At=C({__name:"PlayerDetailTournaments",props:{detail:null},setup(u){const p=n=>{var e;(e=document.getElementById(n))==null||e.scrollIntoView()},d=n=>n==null?"-":n.toLocaleString();return(n,e)=>{const i=D,o=N,a=F;return c(!0),_(w,null,g(u.detail.tournaments,(s,y)=>(c(),_("div",{class:b(["tc",[y%2===1?"tcb":"tca"]]),key:s.tournament_key},[t("div",$t,[l(i,{date:s.tournament_date,spacing:!0},null,8,["date"])]),t("div",ft,[m(r(s.team_result)+" ",1),kt]),t("div",vt,[t("a",{href:`#${s.tournament_key}`,onClick:[e[0]||(e[0]=B((...h)=>n.linkClick&&n.linkClick(...h),["prevent","stop"])),h=>p(s.tournament_key)]},r(s.tournament_name),9,wt)]),t("div",gt,[l(o,{name:s.team_name,currentName:s.team_current_name},null,8,["name","currentName"])]),t("div",Ct,[l(a,{names:s.mate_list},null,8,["names"])]),t("div",Dt,[Nt,m(" "+r(d(s.rating))+" ",1),t("span",bt,"("+r(d(s.rank))+"\u4F4D / "+r(d(s.total))+"\u4EBA)",1)])],2))),128)}}}),xt={key:0},Ft=t("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),St={key:1},Tt=t("h2",null,"\u8A66\u5408\u7D50\u679C",-1),Rt=C({__name:"detail",setup(u){const{$host:p,$ratingClass:d}=E(),n=L(),e=V(null),i=()=>{$fetch(`${p()}/player/${n.query.p}.json`).then(a=>{for(const s of a.matches)s.wl=s.opponent_team_key===s.loser_key,s.score_text=s.wl?`${s.winner_score} - ${s.loser_score}`:`${s.loser_score} - ${s.winner_score}`;e.value=a})},o=I(()=>{if(e.value)return K(e.value.matches.map(a=>({key:a.tnmt_key,wl:a.wl===!0})),e.value.tournaments.map(a=>({key:a.tournament_key,result:a.team_result})),O.value)});return j(()=>n.query,async()=>{e.value=null,await i()}),q(n.path),i(),(a,s)=>{const y=S,h=et,k=yt,v=z;return c(),_("div",null,[e.value?(c(),R(v,{key:0},{fallback:A(()=>[]),default:A(()=>[l(y,{title:e.value.player.collated_name},null,8,["title"]),t("h1",{class:b(x(d)(e.value.player.rating))},r(e.value.player.collated_name),3),l(h,{detail:e.value,resultsSum:x(o)},null,8,["detail","resultsSum"]),e.value.tournaments.length>0?(c(),_("div",xt,[Ft,l(At,{detail:e.value},null,8,["detail"])])):$("",!0),e.value.tournaments.length>0?(c(),_("div",St,[Tt,l(k,{detail:e.value},null,8,["detail"])])):$("",!0)]),_:1})):$("",!0)])}}});export{Rt as default};
