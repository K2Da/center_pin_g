import{_ as F,a as B,b as D}from"./client-only.e701b950.js";import{_ as A}from"./TeamNaviLink.vue_vue_type_script_setup_true_lang.a8773668.js";import{_ as E}from"./PlayerName.vue_vue_type_script_setup_true_lang.5a13496d.js";import{_ as V}from"./TeamName.vue_vue_type_script_setup_true_lang.0e0010d5.js";import{_ as q}from"./TournamentName.vue_vue_type_script_setup_true_lang.423f39ce.js";import{_ as M}from"./DateTime.vue_vue_type_script_setup_true_lang.dc419c13.js";import{a as T,z as w,J as C,o as a,e as r,f as s,N as O,u as l,F as y,r as $,t as x,q as h,c as b,p as g,h as N,v as P,b as R,y as S,A as z,s as K,B as L,O as j}from"./entry.ff056bd0.js";import"./composables.d23f5e28.js";const H=s("h2",null,"\u51FA\u5834\u30E1\u30F3\u30D0\u30FC",-1),J={style:{"overflow-y":"scroll"}},G=s("th",{style:{width:"12em"}},null,-1),I=s("th",{class:"tal",style:{width:"12em"}},"\u524D\u30C1\u30FC\u30E0",-1),Q=s("th",{class:"tal nw",style:{width:"12em"}},"\u6700\u65B0\u30C1\u30FC\u30E0",-1),U={class:"tal"},W={class:"tal"},X=["src"],Y={class:"tal"},Z={key:0},ee=T({__name:"TeamDetailMember",props:{detail:null},setup(p){const{detail:f}=p,m=w(()=>f.tournaments.slice().reverse()),u=w(()=>{var d;const o={};if(C.value)for(const n of f.players)o[n]=((d=C.value.filter(t=>t.name===n)[0])==null?void 0:d.latest.team_current)||"",o[n]===f.team.name&&(o[n]="");return o}),v=w(()=>{const o={};for(const n of f.players){o[n]=[];for(const[t,i]of m.value.entries())i.player_list.indexOf(n)!==-1&&o[n].push(t)}const d={};for(const n of f.players){d[n]=[];for(let t=0;t<m.value.length;t++){const i=o[n];let _="";const e=Math.min(...i),c=Math.max(...i),k=t===m.value.length-1;i.includes(t)?i.length===1?_=k?"one":"spot":e===t?_="start":c===t?_=k?"current":"end":_="on":e<t&&t<c&&(_="off"),d[n].push(_)}}return d});return(o,d)=>{const n=E,t=V,i=q,_=F;return a(),r(y,null,[H,s("div",J,[s("table",{style:O({width:`${12+12+3*l(m).length+12+2}em`})},[s("thead",null,[s("tr",null,[G,I,(a(!0),r(y,null,$(l(m),(e,c)=>(a(),r("th",{class:"tac",style:{width:"3em","padding-left":"0","padding-right":"0","margin-left":"0","margin-right":"0"},key:c},x(c+1),1))),128)),Q])]),s("tbody",null,[(a(!0),r(y,null,$(p.detail.players,e=>(a(),r("tr",{key:e},[s("td",U,[h(n,{name:e,page:"member"},null,8,["name"])]),s("td",W,[p.detail.previous_teams[e]?(a(),b(t,{key:0,name:p.detail.previous_teams[e],currentName:p.detail.previous_teams[e],page:"member"},null,8,["name","currentName"])):g("",!0)]),(a(!0),r(y,null,$(l(v)[e],(c,k)=>(a(),r("td",{key:k,class:"tight"},[c!==""?(a(),r("img",{key:0,src:`/parts/${c}.svg`,style:{width:"3em",height:"2em"}},null,8,X)):g("",!0)]))),128)),s("td",Y,[l(u)[e]?(a(),r("span",Z,[l(u)[e]?(a(),b(t,{key:0,name:l(u)[e],currentName:l(u)[e],page:"member"},null,8,["name","currentName"])):g("",!0)])):g("",!0)])]))),128))])],4),s("ul",null,[(a(!0),r(y,null,$(l(m),(e,c)=>(a(),r("li",{key:c},[N(x(c+1)+". ",1),h(M,{date:e.tournament_date,spacing:!0},null,8,["date"]),N(" \xA0 "),h(i,{name:e.tournament_name,tournamentKey:e.tournament_key},null,8,["name","tournamentKey"]),N(" \xA0 ("),h(_,{rank:e.result},null,8,["rank"]),N(") ")]))),128))])])],64)}}}),ue=T({__name:"member",setup(p){const{$host:f}=P(),m=R(),u=S(null),v=()=>{$fetch(`${f()}/team/${m.query.m}.json`).then(o=>{u.value=j(o)})};return z(()=>m.query,async()=>{u.value=null,await v()}),K(m.path),v(),(o,d)=>{const n=D,t=A,i=ee,_=B;return a(),r("div",null,[l(u)?(a(),b(_,{key:0},{default:L(()=>[h(n,{title:`${l(u).team.name}: \u7DE8\u6210`},null,8,["title"]),s("h1",null,x(l(u).team.name),1),h(t,{current:"member",m:l(m).query.m},null,8,["m"]),h(i,{detail:l(u)},null,8,["detail"])]),_:1})):g("",!0)])}}});export{ue as default};
