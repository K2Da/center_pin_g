import{_ as S,a as b,b as E}from"./client-only.4b231386.js";import{t as P,_ as M}from"./team.eb591cdb.js";import{_ as V}from"./DateSpan.vue_vue_type_script_setup_true_lang.800b94b0.js";import{c as L,_ as I,a as O,l as j}from"./qeuryWatcher.9066cc72.js";import{_ as q}from"./Name.vue_vue_type_script_setup_true_lang.44bf9def.js";import{a as T,A as H,B as K,I as A,o as c,b as _,f as v,t as y,G as x,e,m as n,u as t,F as w,h as C,w as z,H as G,j as N,r as B,l as J,c as Q,J as U,R as W}from"./entry.f1b42c25.js";import{_ as R}from"./ToggleButton.vue_vue_type_script_setup_true_lang.e7f55f64.js";import{_ as X}from"./DateTime.vue_vue_type_script_setup_true_lang.46aa0b7e.js";import{_ as Y}from"./Name.vue_vue_type_script_setup_true_lang.1f624daa.js";import{_ as F}from"./PlayersLine.vue_vue_type_script_setup_true_lang.eca2f068.js";import{_ as Z}from"./Name.vue_vue_type_script_setup_true_lang.8f9e7b7f.js";import{s as tt,c as et}from"./helpers.3488eb77.js";import{s as nt}from"./ga.ff5f18f1.js";import"./composables.4156f596.js";const st={key:0},at=e("span",{class:"muted"},"\u5927\u4F1A\u767B\u9332\u30C1\u30FC\u30E0\u540D: ",-1),ot=e("span",{class:"muted"},"\u6D3B\u52D5\u671F\u9593: ",-1),lt=e("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC(\u51FA\u5834\u56DE\u6570): ",-1),it={class:"muted"},ut=T({__name:"Info",props:{detail:null},setup(s){const{detail:i}=s,o=H(),{tournaments:l}=K(o),h=A(()=>{if(i)return L(i.matches.map(a=>({key:a.tnmt_key,wl:a.wl===!0})),i.tournaments.map(a=>({key:a.tournament_key,result:a.result})),l.value)}),d=(a,r)=>a.slice().sort((m,p)=>r[p].count-r[m].count);return(a,r)=>{var $,u,g;const m=V,p=I,f=q;return c(),_("ul",null,[((u=($=s.detail.info)==null?void 0:$.aliases)==null?void 0:u.length)>0?(c(),_("li",st,[at,v(" "+y((g=s.detail.info)==null?void 0:g.aliases.join(", ")),1)])):x("",!0),e("li",null,[ot,n(m,{date1:s.detail.team.first_tournament_date,date2:s.detail.team.latest_tournament_date},null,8,["date1","date2"])]),n(p,{resultsSum:t(h)},null,8,["resultsSum"]),e("li",null,[lt,(c(!0),_(w,null,C(d(s.detail.players,s.detail.playerStats),(k,D)=>(c(),_("span",{key:k},[D!==0?(c(),_(w,{key:0},[v(", ")],64)):x("",!0),n(f,{name:k},null,8,["name"]),e("span",it,"("+y(s.detail.playerStats[k].count)+")",1)]))),128))])])}}}),ct={class:"ti",style:{width:"8em"}},mt=e("span",{class:"muted"},"r: ",-1),_t={class:"ti tac",style:{width:"2em"}},rt={class:"ti tac",style:{width:"4em"}},dt={class:"ti",style:{width:"24em"}},pt={class:"ti",style:{width:"4em"}},ht={class:"ti",style:{width:"48em"}},ft=T({__name:"Matches",props:{detail:null,tournament:null,index:null,show:{type:Boolean}},setup(s){const{detail:i,tournament:o,index:l,show:h}=s,d=i.matches.filter(a=>a.tnmt_key===o.tournament_key);return(a,r)=>{const m=O,p=Z,f=S,$=F;return c(!0),_(w,null,C(t(d),(u,g)=>z((c(),_("div",{class:N(["stc",t(tt)(g,s.index,t(d).length)]),key:`${u.bracket}_${u.round}`,style:{"margin-left":"0.5em",width:"calc(100% - 0.5em)"}},[e("div",ct,[v(y(u.bracket)+" ",1),mt,v(y(u.round),1)]),e("div",_t,[n(m,{win:u.wl},null,8,["win"])]),e("div",rt,y(u.score_text),1),e("div",dt,[n(p,{name:u.opponent_team_name,currentName:u.opponent_team_current_name},null,8,["name","currentName"])]),e("div",pt,[n(f,{rank:u.opponent_team_rank},null,8,["rank"])]),e("div",ht,[n($,{names:u.opponents_list},null,8,["names"])])],2)),[[G,s.show]])),128)}}}),yt={class:"ti",style:{width:"2em","padding-left":"0.5em"}},$t={class:"ti tal",style:{width:"7em"}},gt={class:"ti tar",style:{width:"3em","padding-right":"4px"}},wt={class:"ti",style:{width:"32em"}},kt={class:"ti",style:{width:"24em"}},vt={class:"ti",style:{width:"36em"}},Tt=T({__name:"Tournament",props:{detail:null,tournament:null,i:null,openAll:{type:Boolean}},setup(s){const i=s,{detail:o,tournament:l,i:h}=i,d=B(!1),a=m=>{d.value=m},r=A(()=>d.value||i.openAll);return(m,p)=>{const f=R,$=X,u=S,g=Y,k=F,D=ft;return c(),_(w,null,[e("div",yt,[n(f,{id:`tournaments-toggle-${t(h)}`,value:!1,onToggle:a},null,8,["id"])]),e("div",$t,[n($,{date:t(l).tournament_date,spacing:!0},null,8,["date"])]),e("div",gt,[n(u,{rank:t(l).result},null,8,["rank"])]),e("div",wt,[n(g,{name:t(l).tournament_name,tournamentKey:t(l).tournament_key},null,8,["name","tournamentKey"])]),e("div",kt,y(t(l).name),1),e("div",vt,[n(k,{names:t(l).player_list},null,8,["names"])]),n(D,{detail:t(o),tournament:t(l),index:t(h),show:t(r)},null,8,["detail","tournament","index","show"])],64)}}}),xt={style:{padding:"0 0 0.2em 0.5em"}},Dt=e("span",null,"All",-1),Ct=T({__name:"Tournaments",props:{detail:null},setup(s){const i=B(!1),o=l=>{i.value=l};return(l,h)=>{const d=R,a=Tt;return c(),_(w,null,[e("div",xt,[n(d,{id:"tournaments-all-toggle",value:!1,onToggle:o}),v(),Dt]),(c(!0),_(w,null,C(s.detail.tournaments,(r,m)=>(c(),_("div",{class:N(["tc",t(et)(m)]),key:r.tournament_key},[n(a,{tournament:r,detail:s.detail,i:m,openAll:t(i)},null,8,["tournament","detail","i","openAll"])],2))),128))],64)}}}),Bt={key:0},St=e("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Ht=T({__name:"detail",setup(s){const i=J(),o=B(null),l=async()=>{o.value=null,o.value=P(await W(i.query.m))};return nt(i.path),l(),j(l),(h,d)=>{const a=E,r=M,m=ut,p=Ct,f=b;return c(),_("div",null,[t(o)?(c(),Q(f,{key:0},{default:U(()=>[n(a,{title:`${t(o).team.name}: \u6226\u7E3E`},null,8,["title"]),e("h1",null,y(t(o).team.name),1),n(r,{current:"detail",m:t(i).query.m},null,8,["m"]),n(m,{detail:t(o)},null,8,["detail"]),t(o).tournaments.length>0?(c(),_("div",Bt,[St,n(p,{detail:t(o)},null,8,["detail"])])):x("",!0)]),_:1})):x("",!0)])}}});export{Ht as default};
