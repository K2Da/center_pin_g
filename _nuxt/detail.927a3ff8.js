import{_ as R,a as q,b as I}from"./client-only.39d340cc.js";import{_ as j}from"./NaviLink.vue_vue_type_script_setup_true_lang.7e4ab84b.js";import{_ as z,a as K,b as E,l as H,c as Q}from"./qeuryWatcher.37e17c75.js";import{_ as G}from"./SocialAccounts.vue_vue_type_script_setup_true_lang.4e1a6031.js";import{_ as L}from"./DateTime.vue_vue_type_script_setup_true_lang.8241312a.js";import{_ as M,s as J,c as U,r as W}from"./Name.vue_vue_type_script_setup_true_lang.49167d18.js";import{a as T,r as D,o as u,f as r,i as $,t as y,q as v,v as a,h as e,F as k,w as B,u as t,x as X,y as Y,z as P,A as O,e as Z,s as tt,b as et,c as nt,B as F,C as at}from"./entry.aaf6cfe9.js";import{_ as st}from"./Name.vue_vue_type_script_setup_true_lang.2c46edac.js";import{_ as V}from"./PlayersLine.vue_vue_type_script_setup_true_lang.ab725ea9.js";import{s as ot}from"./ga.2f119fb9.js";import"./composables.4cbe8788.js";import"./Name.vue_vue_type_script_setup_true_lang.0c9d049e.js";const lt={key:0},ct=e("span",{class:"muted"},"\u5927\u4F1A\u51FA\u5834\u540D: ",-1),ut={key:1},it=e("span",{class:"muted"},"ratings: ",-1),rt={key:2},mt=e("span",{class:"muted"},"url: ",-1),_t=e("span",{class:"muted"},"\u30C1\u30FC\u30E0",-1),dt={class:"muted"},ht=T({__name:"Info",props:{detail:null,resultsSum:null},setup(s){const{detail:p,resultsSum:f}=s,n=m=>{const l={};for(const c of m.tournaments){const h=c.team_current_name;l[h]?(l[h].count+=1,l[h].lastMatchAt=Math.max(c.tournament_date,l[h].lastMatchAt)):l[h]={name:h,count:1,lastMatchAt:c.tournament_date}}return Object.values(l).sort(c=>-c.lastMatchAt)},o=()=>{_.value=!0},_=D(!1),d=n(p);return(m,l)=>{var g,A,C,S,N;const c=z,h=G,w=L,i=M;return u(),r("ul",null,[((A=(g=s.detail.data)==null?void 0:g.aliases)==null?void 0:A.length)>0?(u(),r("li",lt,[ct,$(" "+y(s.detail.data.aliases.join(", ")),1)])):v("",!0),a(c,{resultsSum:s.resultsSum},null,8,["resultsSum"]),s.detail.player.rating?(u(),r("li",ut,[it,$(" "+y(s.detail.player.rating.toLocaleString()),1)])):v("",!0),s.detail.data?(u(),r("li",rt,[mt,a(h,{twitter:(C=s.detail.data)==null?void 0:C.twitter,youtube:(S=s.detail.data)==null?void 0:S.youtube,twitch:(N=s.detail.data)==null?void 0:N.twitch},null,8,["twitter","youtube","twitch"])])):v("",!0),e("li",null,[_t,e("ul",null,[(u(!0),r(k,null,B(t(d),(x,b)=>(u(),r("li",{key:x.name},[t(d).length<=3||b===0||b===t(d).length-1||t(_)?(u(),r(k,{key:0},[e("span",dt,[a(w,{date:x.lastMatchAt,spacing:!0},null,8,["date"])]),$("\xA0 "),a(i,{name:x.name,currentName:x.name},null,8,["name","currentName"]),$(" ("+y(x.count)+") ",1)],64)):v("",!0),!t(_)&&t(d).length>=3&&b===1?(u(),r("button",{key:1,class:"muted",onClick:o}," /* \u4ED6"+y(t(d).length-2)+"\u30C1\u30FC\u30E0 */ ",1)):v("",!0)]))),128))])])])}}});const pt={class:"ti",style:{width:"8em","padding-left":"0.5em"}},yt=e("span",{class:"muted"},"r: ",-1),ft={class:"ti tac",style:{width:"2em"}},gt={class:"ti tac",style:{width:"4em"}},$t={class:"ti",style:{width:"24em"}},wt={class:"ti",style:{width:"4em"}},vt={class:"ti",style:{width:"48em"}},kt=T({__name:"Matches",props:{detail:null,tournament:null,index:null,show:{type:Boolean}},setup(s){const{detail:p,tournament:f,index:n,show:o}=s,_=p.matches.filter(d=>d.tnmt_key===f.tournament_key);return(d,m)=>{const l=K,c=M,h=R,w=V;return u(!0),r(k,null,B(t(_),(i,g)=>X((u(),r("div",{class:P(["stc",t(J)(g,s.index,t(_).length)]),key:`${i.bracket}_${i.round}`,style:{"margin-left":"0.5em",width:"calc(100% - 0.5em)"}},[e("div",pt,[$(y(i.bracket)+" ",1),yt,$(y(i.round),1)]),e("div",ft,[a(l,{win:i.wl},null,8,["win"])]),e("div",gt,y(i.score_text),1),e("div",$t,[a(c,{name:i.opponent_team_name,currentName:i.opponent_team_current_name},null,8,["name","currentName"])]),e("div",wt,[a(h,{rank:i.opponent_team_rank},null,8,["rank"])]),e("div",vt,[a(w,{names:i.opponents_list},null,8,["names"])])],2)),[[Y,s.show]])),128)}}}),xt={class:"ti",style:{width:"2em","padding-left":"0.5em"}},Tt={class:"ti tal",style:{width:"7em"}},At={class:"ti tar",style:{width:"3em","padding-right":"4px"}},Ct={class:"ti",style:{width:"32em"}},St={class:"ti",style:{width:"18em"}},Nt={class:"ti",style:{width:"36em"}},Dt={class:"ti",style:{width:"12em"}},bt=e("span",{class:"muted"},"\u{1F4C8}",-1),Mt={class:"muted"},Bt=T({__name:"Tournament",props:{detail:null,tournament:null,i:null,openAll:{type:Boolean}},setup(s){const p=s,{detail:f,tournament:n,i:o}=p,_=D(!1),d=c=>{_.value=c},m=O(()=>_.value||p.openAll),l=c=>c==null?"-":c.toLocaleString();return(c,h)=>{const w=E,i=L,g=R,A=st,C=M,S=V,N=kt;return u(),r(k,null,[e("div",xt,[a(w,{id:`tournaments-toggle-${t(o)}`,onToggle:d},null,8,["id"])]),e("div",Tt,[a(i,{date:t(n).tournament_date,spacing:!0},null,8,["date"])]),e("div",At,[a(g,{rank:t(n).team_result},null,8,["rank"])]),e("div",Ct,[a(A,{name:t(n).tournament_name,tournamentKey:t(n).tournament_key},null,8,["name","tournamentKey"])]),e("div",St,[a(C,{name:t(n).team_name,currentName:t(n).team_current_name},null,8,["name","currentName"])]),e("div",Nt,[a(S,{names:t(n).mate_list},null,8,["names"])]),e("div",Dt,[bt,$(" "+y(l(t(n).rating))+" ",1),e("span",Mt,"("+y(l(t(n).rank))+"\u4F4D / "+y(l(t(n).total))+"\u4EBA)",1)]),a(N,{detail:t(f),tournament:t(n),index:t(o),show:t(m)},null,8,["detail","tournament","index","show"])],64)}}}),Pt={style:{padding:"0 0 0.2em 0.5em"}},Ft=e("span",null,"All",-1),Rt=T({__name:"Tournaments",props:{detail:null},setup(s){const p=D(!1),f=n=>{p.value=n};return(n,o)=>{const _=E,d=Bt;return u(),r(k,null,[e("div",Pt,[a(_,{id:"tournaments-all-toggle",onToggle:f}),$(),Ft]),(u(!0),r(k,null,B(s.detail.tournaments,(m,l)=>(u(),r("div",{class:P(["tc",t(U)(l)]),key:m.tournament_key},[a(d,{tournament:m,detail:s.detail,i:l,openAll:t(p)},null,8,["tournament","detail","i","openAll"])],2))),128))],64)}}}),Et={key:0},Lt=e("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Wt=T({__name:"detail",setup(s){const p=Z(),{tournaments:f}=tt(p),n=et(),o=D(null),_=async()=>{o.value=null,o.value=await at((n.query.p||"").toString())},d=O(()=>{if(o.value)return Q(o.value.matches.map(m=>({key:m.tnmt_key,wl:m.wl===!0})),o.value.tournaments.map(m=>({key:m.tournament_key,result:m.team_result})),f.value)});return ot(n.path),_(),H(_),(m,l)=>{const c=I,h=j,w=ht,i=Rt,g=q;return u(),r("div",null,[t(o)?(u(),nt(g,{key:0},{fallback:F(()=>[]),default:F(()=>[a(c,{title:`${t(o).player.collated_name}: \u6226\u7E3E`},null,8,["title"]),e("h1",{class:P(t(W)(t(o).player.collated_name))},y(t(o).player.collated_name),3),a(h,{current:"detail",p:t(n).query.p},null,8,["p"]),a(w,{detail:t(o),resultsSum:t(d)},null,8,["detail","resultsSum"]),t(o).tournaments.length>0?(u(),r("div",Et,[Lt,a(i,{detail:t(o)},null,8,["detail"])])):v("",!0)]),_:1})):v("",!0)])}}});export{Wt as default};
