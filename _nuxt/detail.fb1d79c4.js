import{_ as N}from"./PageHead.vue_vue_type_script_setup_true_lang.303e22ee.js";import{_ as T,a as M}from"./MatchResult.vue_vue_type_script_setup_true_lang.bbb53ba3.js";import{_ as P}from"./SocialAccounts.vue_vue_type_script_setup_true_lang.f2862695.js";import{_ as D}from"./DateTime.vue_vue_type_script_setup_true_lang.20892d6b.js";import{_ as b}from"./TeamName.vue_vue_type_script_setup_true_lang.4938f407.js";import{a as C,o as c,e as _,h as m,t as r,p as $,q as l,f as t,F as w,r as g,v as A,w as B,x as E,b as L,y as V,z as I,A as j,s as q,c as R,B as x,C as z,u as F,D as K,E as O}from"./entry.84b11f69.js";import{_ as S}from"./PlayersLine.vue_vue_type_script_setup_true_lang.ba4f51c0.js";import{_ as H}from"./TournamentName.vue_vue_type_script_setup_true_lang.88472bdb.js";import"./PlayerName.vue_vue_type_script_setup_true_lang.7d49e658.js";const G={key:0},J=t("span",{class:"muted"},"\u5927\u4F1A\u51FA\u5834\u540D: ",-1),Q={key:1},U=t("span",{class:"muted"},"ratings: ",-1),W={key:2},X=t("span",{class:"muted"},"url: ",-1),Y=t("span",{class:"muted"},"\u30C1\u30FC\u30E0",-1),Z={class:"muted"},tt=m("\xA0 "),et=C({__name:"PlayerDetailInfo",props:{detail:null,resultsSum:null},setup(o){const p=d=>{const n={};for(const e of d.tournaments){const u=e.team_current_name;n[u]?(n[u].count+=1,n[u].lastMatchAt=Math.max(e.tournament_date,n[u].lastMatchAt)):n[u]={name:u,count:1,lastMatchAt:e.tournament_date}}return Object.values(n).sort(e=>-e.lastMatchAt)};return(d,n)=>{var s,y,h,f,k;const e=T,u=P,i=D,a=b;return c(),_("ul",null,[((y=(s=o.detail.data)==null?void 0:s.aliases)==null?void 0:y.length)>0?(c(),_("li",G,[J,m(" "+r(o.detail.data.aliases.join(", ")),1)])):$("",!0),l(e,{resultsSum:o.resultsSum},null,8,["resultsSum"]),o.detail.player.rating?(c(),_("li",Q,[U,m(" "+r(o.detail.player.rating.toLocaleString()),1)])):$("",!0),o.detail.data?(c(),_("li",W,[X,l(u,{twitter:(h=o.detail.data)==null?void 0:h.twitter,youtube:(f=o.detail.data)==null?void 0:f.youtube,twitch:(k=o.detail.data)==null?void 0:k.twitch},null,8,["twitter","youtube","twitch"])])):$("",!0),t("li",null,[Y,t("ul",null,[(c(!0),_(w,null,g(p(o.detail),v=>(c(),_("li",{key:v.name},[t("span",Z,[l(i,{date:v.lastMatchAt,spacing:!0},null,8,["date"])]),tt,l(a,{name:v.name},null,8,["name"]),m(" ("+r(v.count)+") ",1)]))),128))])])])}}}),st=["id"],at=t("span",{class:"muted"},"\u958B\u50AC\u65E5: ",-1),nt=t("span",{class:"muted"},"\u30C1\u30FC\u30E0: ",-1),lt=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC: ",-1),ot=t("span",{class:"muted"},"\u7D50\u679C: ",-1),ut=t("span",{class:"muted"},"\u4F4D",-1),it={class:"ti",style:{width:"8em"}},ct=t("span",{class:"muted"},"r: ",-1),_t={class:"ti tac",style:{width:"2em"}},rt={class:"ti tac",style:{width:"4em"}},mt={class:"ti",style:{width:"24em"}},dt={class:"ti",style:{width:"4em"}},ht=t("span",{class:"muted"}," \u4F4D",-1),pt={class:"ti",style:{width:"48em"}},yt=C({__name:"PlayerDetailMatches",props:{detail:null},setup(o){return(p,d)=>{const n=D,e=b,u=S;return c(!0),_(w,null,g(o.detail.tournaments,i=>(c(),_("div",{key:i.tournament_key,style:{"border-bottom":"var(--border) 1px solid"}},[t("h3",{id:i.tournament_key},[l(H,{tournamentKey:i.tournament_key,name:i.tournament_name},null,8,["tournamentKey","name"])],8,st),t("ul",null,[t("li",null,[at,l(n,{date:i.tournament_date,spacing:!1},null,8,["date"])]),t("li",null,[nt,l(e,{name:i.team_name},null,8,["name"])]),t("li",null,[lt,m(" "+r(i.member_name)+", ",1),l(u,{names:i.mate_list},null,8,["names"])]),t("li",null,[ot,m(" "+r(i.team_result),1),ut])]),(c(!0),_(w,null,g(o.detail.matches.filter(a=>a.tnmt_key===i.tournament_key),(a,s)=>(c(),_("div",{class:A(["tc",[s%2===1?"tcb":"tca"]]),key:`${a.bracket}_${a.round}`},[t("div",it,[m(r(a.bracket)+" ",1),ct,m(r(a.round),1)]),t("div",_t,[l(M,{win:a.wl},null,8,["win"])]),t("div",rt,r(a.score_text),1),t("div",mt,[l(e,{name:a.opponent_team_name,currentName:a.opponent_team_current_name},null,8,["name","currentName"])]),t("div",dt,[m(r(a.opponent_team_rank),1),ht]),t("div",pt,[l(u,{names:a.opponents_list},null,8,["names"])])],2))),128))]))),128)}}}),$t={class:"ti tal",style:{width:"7em"}},ft={class:"ti tar",style:{width:"3em","padding-right":"4px"}},kt=t("span",{class:"muted"},"\u4F4D",-1),vt={class:"ti",style:{width:"32em"}},wt=["href","onClick"],gt={class:"ti",style:{width:"18em"}},Ct={class:"ti",style:{width:"36em"}},Dt={class:"ti",style:{width:"12em"}},bt=t("span",{class:"muted"},"\u{1F4C8}",-1),At={class:"muted"},xt=C({__name:"PlayerDetailTournaments",props:{detail:null},setup(o){const p=n=>{var e;(e=document.getElementById(n))==null||e.scrollIntoView()},d=n=>n==null?"-":n.toLocaleString();return(n,e)=>{const u=D,i=b,a=S;return c(!0),_(w,null,g(o.detail.tournaments,(s,y)=>(c(),_("div",{class:A(["tc",[y%2===1?"tcb":"tca"]]),key:s.tournament_key},[t("div",$t,[l(u,{date:s.tournament_date,spacing:!0},null,8,["date"])]),t("div",ft,[m(r(s.team_result)+" ",1),kt]),t("div",vt,[t("a",{href:`#${s.tournament_key}`,onClick:[e[0]||(e[0]=B((...h)=>n.linkClick&&n.linkClick(...h),["prevent","stop"])),h=>p(s.tournament_key)]},r(s.tournament_name),9,wt)]),t("div",gt,[l(i,{name:s.team_name},null,8,["name"])]),t("div",Ct,[l(a,{names:s.mate_list},null,8,["names"])]),t("div",Dt,[bt,m(" "+r(d(s.rating))+" ",1),t("span",At,"("+r(d(s.rank))+"\u4F4D / "+r(d(s.total))+"\u4EBA)",1)])],2))),128)}}}),Ft={key:0},St=t("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),Nt={key:1},Tt=t("h2",null,"\u8A66\u5408\u7D50\u679C",-1),Rt=C({__name:"detail",setup(o){const{$host:p,$ratingClass:d}=E(),n=L(),e=V(null),u=()=>{$fetch(`${p()}/player/${n.query.p}.json`).then(a=>{for(const s of a.matches)s.wl=s.opponent_team_key===s.loser_key,s.score_text=s.wl?`${s.winner_score} - ${s.loser_score}`:`${s.loser_score} - ${s.winner_score}`;e.value=a})},i=I(()=>{if(e.value)return K(e.value.matches.map(a=>({key:a.tnmt_key,wl:a.wl===!0})),e.value.tournaments.map(a=>({key:a.tournament_key,result:a.team_result})),O.value)});return j(()=>n.query,async()=>{e.value=null,await u()}),q(n.path),u(),(a,s)=>{const y=N,h=et,f=yt,k=z;return c(),_("div",null,[e.value?(c(),R(k,{key:0},{fallback:x(()=>[]),default:x(()=>[l(y,{title:e.value.player.collated_name},null,8,["title"]),t("h1",{class:A(F(d)(e.value.player.rating))},r(e.value.player.collated_name),3),l(h,{detail:e.value,resultsSum:F(i)},null,8,["detail","resultsSum"]),e.value.tournaments.length>0?(c(),_("div",Ft,[St,l(xt,{detail:e.value},null,8,["detail"])])):$("",!0),e.value.tournaments.length>0?(c(),_("div",Nt,[Tt,l(f,{detail:e.value},null,8,["detail"])])):$("",!0)]),_:1})):$("",!0)])}}});export{Rt as default};
