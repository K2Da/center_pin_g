import{g as M,y as N,D as L,r as V,G as q,H as F,o,c as s,a as D,F as y,B as b,u as p,t as a,E as f,d,b as w,w as v,e as A}from"./B5_IcdL9.js";import{q as E}from"./KanWJeh5.js";import{d as k}from"./6QeDOyeO.js";const H={class:"calendar"},j={key:0},G={key:1},J={style:{color:"yellowgreen"}},K={key:2,class:"event"},P={key:0,class:"m"},X={key:1,class:"m"},Y={key:0,class:"more"},O=M({__name:"List",props:{prev:{},next:{}},async setup(T){let l,g;const{data:S}=([l,g]=N(()=>L(()=>E("/topic").find(),"$9KyyrXfTBS")),l=await l,g(),l),{prev:_,next:x}=T,B=()=>{if(_!=0&&!m.value)return[];const e=new Date,r=24*60*60*1e3,u=new Date(e.getTime()-_*r),t=new Date(e.getTime()+x*r);let n=[{topic:"",path:"",date:e,title:""}];for(const c of S.value)for(const i of c.dates)_!==0&&(new Date(i.date)<u||new Date(i.date)>t)||n.push({topic:c.title||"",path:c._path||"",title:i.title,date:new Date(i.date)});return n=n.sort((c,i)=>c.date<i.date?1:-1),n},C=e=>{if(!m)return"";const r=k(e.getTime(),new Date().getTime());return-2<=r&&r<=2?["一昨日","昨日","今日","明日","明後日"][r+2]:""},m=V(!1),h=q(()=>B());return F(()=>{m.value=!0}),(e,r)=>{const u=A;return o(),s(y,null,[D("div",H,[(o(!0),s(y,null,b(p(h),(t,n)=>(o(),s(y,null,[n===0||t.date.getMonth()!==p(h)[n-1].date.getMonth()?(o(),s("h3",j,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):f("",!0),n===0||("diffDays"in e?e.diffDays:p(k))(t.date.getTime(),p(h)[n-1].date.getTime())!==0?(o(),s("h4",G,[d(a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") ",1),D("span",J,a(C(t.date)),1)])):f("",!0),t.title!=""?(o(),s("div",K,[t.date.getSeconds()!==1?(o(),s("span",P,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(o(),s("span",X,"--:--")),d("   "),w(u,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:v(()=>[d(a(t.topic),1)]),_:2},1032,["to"]),d(" - "+a(t.title),1)])):f("",!0)],64))),256))]),e.prev!==0?(o(),s("p",Y,[d(a(e.prev)+"日前〜"+a(e.next)+"日後表示中 [",1),w(u,{to:{name:"calendar"}},{default:v(()=>[d("+ more")]),_:1}),d("] ")])):f("",!0)],64)}}});export{O as _};
