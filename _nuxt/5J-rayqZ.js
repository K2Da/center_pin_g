import{V as E,g as h,r as p,H as O,M as S,W as k,o as g,c as m,X as f,E as I,a as w,Y as $,F as T,b as C,w as j,u as L}from"./cdu8dAyG.js";const P=E("/xpost.png");var v=Object.getOwnPropertySymbols,R=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,U=(e,n)=>{var r={};for(var t in e)R.call(e,t)&&n.indexOf(t)<0&&(r[t]=e[t]);if(e!=null&&v)for(var t of v(e))n.indexOf(t)<0&&x.call(e,t)&&(r[t]=e[t]);return r},B=(e,n)=>{const r=e.__vccOpts||e;for(const[t,o]of n)r[t]=o;return r};const M=["ar","bn","cs","da","de","el","en","es","fa","fi","fil","fr","he","hi","hu","id","it","ja","ko","msa","nl","no","pl","pt","ro","ru","sv","th","tr","uk","ur","vi","zh-cn","zh-tw"],N=/^(https?:\/\/)?(www\.)?twitter\.com\/.*\/status(?:es)?\/(?<tweetId>[^\/\?]\d+)$/i,V=h({props:{tweetId:{type:String,default:""},tweetUrl:{type:String,default:""},conversation:{type:String,default:"all",validator:e=>["all","none"].includes(e)},cards:{type:String,default:"visible",validator:e=>["visible","hidden"].includes(e)},width:{type:[String,Number],default:"auto",validator:e=>typeof e=="string"?e==="auto":typeof e=="number"?e>=250&&e<=550:!1},align:{type:[String,void 0],default:void 0,validator:e=>["left","right","center",void 0].includes(e)},theme:{type:String,default:"light",validator:e=>["light","dark"].includes(e)},lang:{type:String,default:"en",validator:e=>M.includes(e)},dnt:{type:Boolean,default:!1}},emits:{"tweet-load-success":e=>!!e,"tweet-load-error":()=>!0},setup(e,{attrs:n,emit:r}){const t=p(!0),o=p(!1),d=p();O(()=>{u()}),S(e,()=>{u()});function u(){if(!(window.twttr&&window.twttr.ready)){y("https://platform.twitter.com/widgets.js",u);return}window.twttr.ready().then(({widgets:s})=>{t.value=!0,o.value=!1,d.value&&(d.value.innerHTML="");const{tweetId:i,tweetOptions:a}=_();s.createTweet(i,d.value,a).then(async l=>{await k(),l?r("tweet-load-success",l):(o.value=!0,r("tweet-load-error"))}).finally(()=>{t.value=!1})})}function _(){var s;let i=e,{tweetId:a,tweetUrl:l}=i,b=U(i,["tweetId","tweetUrl"]);if(a&&l)throw new Error("Cannot provide both tweet-id and tweet-url.");if(a){if(!/^\d+$/.test(a))throw new Error("Invalid tweet-id, please provide a valid numerical tweet-id.")}else if(l){const c=l.trim().match(N);if(c)a=(s=c.groups)==null?void 0:s.tweetId;else throw new Error("Invalid tweet-url.")}else throw new Error("Must provide either tweet-id or tweet-url.");return{tweetId:a,tweetOptions:b}}function y(s,i){const a=document.createElement("script");a.setAttribute("src",s),a.addEventListener("load",()=>i(),!1),document.body.appendChild(a)}return{tweetContainerRef:d,isLoading:t,hasError:o,attrs:n}}});function X(e,n,r,t,o,d){return g(),m(T,null,[e.isLoading?f(e.$slots,"loading",{key:0}):e.hasError?f(e.$slots,"error",{key:1}):I("",!0),w("div",$({ref:"tweetContainerRef"},e.attrs),null,16)],64)}var z=B(V,[["render",X]]);const A={style:{padding:"0 12px"}},F=w("span",null,[w("img",{src:P,alt:"loading",style:{border:"1px solid #425364","border-radius":"12px"}})],-1),G=h({__name:"Xpost",props:{id:{}},setup(e){return(n,r)=>(g(),m("div",A,[C(L(z),{"tweet-id":n.id,theme:"dark"},{loading:j(()=>[F]),_:1},8,["tweet-id"])]))}});export{G as default};
