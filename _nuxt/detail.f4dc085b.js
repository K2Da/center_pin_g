import{_ as L,a as q,b as E}from"./client-only.ec849f23.js";import{_ as F}from"./NaviLink.vue.db5acccb.js";import{_ as K,a as z,l as G,c as H}from"./qeuryWatcher.9c8be8f6.js";import{_ as Q}from"./SocialAccounts.vue.54acc8a7.js";import{_ as O}from"./DateTime.vue.a092be46.js";import{_ as M}from"./Name.vue.702f0e52.js";import{a as T,r as A,o as r,b as _,f,t as h,B as v,m as a,e,F as k,h as P,u as t,w as J,C as U,j as B,D as V,s as W,x as X,l as Y,c as Z,E as R,G as tt}from"./entry.55aac407.js";import{_ as j}from"./ToggleButton.vue.cda71954.js";import{_ as et}from"./Name.vue.887b7444.js";import{_ as I}from"./PlayersLine.vue.6d750644.js";import{s as nt,c as at,r as st}from"./helpers.8afdbb9b.js";import{s as lt}from"./ga.7a7eb594.js";import"./Name.vue.48c8891e.js";const ot={key:0},ct=e("span",{class:"muted"},"大会出場名: ",-1),it={key:1},rt=e("span",{class:"muted"},"ratings: ",-1),ut={key:2},mt=e("span",{class:"muted"},"url: ",-1),_t=e("span",{class:"muted"},"チーム",-1),dt={class:"muted"},pt=T({__name:"Info",props:{detail:null,resultsSum:null},setup(s){const{detail:y,resultsSum:g}=s,n=o=>{const c={};for(const i of o.tournaments){const p=i.team_current_name;c[p]?(c[p].count+=1,c[p].lastMatchAt=Math.max(i.tournament_date,c[p].lastMatchAt)):c[p]={name:p,count:1,lastMatchAt:i.tournament_date}}return Object.values(c).sort(i=>-i.lastMatchAt)},l=()=>{d.value=!0},d=A(!1),u=n(y);return(o,c)=>{var $,S,N,b,x;const i=K,p=Q,w=O,m=M;return r(),_("ul",null,[((S=($=s.detail.player.data)==null?void 0:$.aliases)==null?void 0:S.length)>0?(r(),_("li",ot,[ct,f(" "+h(s.detail.player.data.aliases.join(", ")),1)])):v("",!0),a(i,{resultsSum:s.resultsSum},null,8,["resultsSum"]),s.detail.player.rating?(r(),_("li",it,[rt,f(" "+h(s.detail.player.rating.toLocaleString()),1)])):v("",!0),s.detail.player.data?(r(),_("li",ut,[mt,a(p,{twitter:(N=s.detail.player.data)==null?void 0:N.twitter,youtube:(b=s.detail.player.data)==null?void 0:b.youtube,twitch:(x=s.detail.player.data)==null?void 0:x.twitch},null,8,["twitter","youtube","twitch"])])):v("",!0),e("li",null,[_t,e("ul",null,[(r(!0),_(k,null,P(t(u),(C,D)=>(r(),_("li",{key:C.name},[t(u).length<=3||D===0||D===t(u).length-1||t(d)?(r(),_(k,{key:0},[e("span",dt,[a(w,{date:C.lastMatchAt,spacing:!0},null,8,["date"])]),f("  "),a(m,{name:C.name,currentName:C.name},null,8,["name","currentName"]),f(" ("+h(C.count)+") ",1)],64)):v("",!0),!t(d)&&t(u).length>=3&&D===1?(r(),_("button",{key:1,class:"muted",onClick:l}," /* 他"+h(t(u).length-2)+"チーム */ ",1)):v("",!0)]))),128))])])])}}});const ht={class:"ti",style:{width:"8em","padding-left":"0.5em"}},yt=e("span",{class:"muted"},"r: ",-1),ft={class:"ti tac",style:{width:"2em"}},gt={class:"ti tac",style:{width:"4em"}},$t={class:"ti",style:{width:"24em"}},wt={class:"ti",style:{width:"4em"}},vt={class:"ti",style:{width:"48em"}},kt=T({__name:"Matches",props:{detail:null,tournament:null,index:null,show:{type:Boolean}},setup(s){const{detail:y,tournament:g,index:n,show:l}=s,d=y.matches.filter(u=>u.tnmt_key===g.tournament_key);return(u,o)=>{const c=z,i=M,p=L,w=I;return r(!0),_(k,null,P(t(d),(m,$)=>J((r(),_("div",{class:B(["stc",("subContainerClass"in u?u.subContainerClass:t(nt))($,s.index,t(d).length)]),key:`${m.bracket}_${m.round}`,style:{"margin-left":"0.5em",width:"calc(100% - 0.5em)"}},[e("div",ht,[f(h(m.bracket)+" ",1),yt,f(h(m.round),1)]),e("div",ft,[a(c,{win:m.wl},null,8,["win"])]),e("div",gt,h(m.score_text),1),e("div",$t,[a(i,{name:m.opponent_team_name,currentName:m.opponent_team_current_name},null,8,["name","currentName"])]),e("div",wt,[a(p,{rank:m.opponent_team_rank},null,8,["rank"])]),e("div",vt,[a(w,{names:m.opponents_list},null,8,["names"])])],2)),[[U,s.show]])),128)}}}),Ct={class:"ti",style:{width:"2em","padding-left":"0.5em"}},Tt={class:"ti tal",style:{width:"7em"}},St={class:"ti tar",style:{width:"3em","padding-right":"4px"}},Nt={class:"ti",style:{width:"32em"}},bt={class:"ti",style:{width:"18em"}},xt={class:"ti",style:{width:"36em"}},At={class:"ti",style:{width:"12em"}},Dt=e("span",{class:"muted"},"📈",-1),Mt={class:"muted"},Pt=T({__name:"Tournament",props:{detail:null,tournament:null,i:null,openAll:{type:Boolean}},setup(s){const y=s,{detail:g,tournament:n,i:l}=y,d=A(!1),u=i=>{d.value=i},o=V(()=>d.value||y.openAll),c=i=>i==null?"-":i.toLocaleString();return(i,p)=>{const w=j,m=O,$=L,S=et,N=M,b=I,x=kt;return r(),_(k,null,[e("div",Ct,[a(w,{id:`tournaments-toggle-${t(l)}`,value:!1,onToggle:u},null,8,["id"])]),e("div",Tt,[a(m,{date:t(n).tournament_date,spacing:!0},null,8,["date"])]),e("div",St,[a($,{rank:t(n).team_result},null,8,["rank"])]),e("div",Nt,[a(S,{name:t(n).tournament_name,tournamentKey:t(n).tournament_key},null,8,["name","tournamentKey"])]),e("div",bt,[a(N,{name:t(n).team_name,currentName:t(n).team_current_name},null,8,["name","currentName"])]),e("div",xt,[f(h(t(n).member_name)+", ",1),a(b,{names:t(n).mate_list},null,8,["names"])]),e("div",At,[Dt,f(" "+h(c(t(n).rating))+" ",1),e("span",Mt,"("+h(c(t(n).rank))+"位 / "+h(c(t(n).total))+"人)",1)]),a(x,{detail:t(g),tournament:t(n),index:t(l),show:t(o)},null,8,["detail","tournament","index","show"])],64)}}}),Bt={style:{padding:"0 0 0.2em 0.5em"}},Rt=e("span",null,"All",-1),Lt=T({__name:"Tournaments",props:{detail:null},setup(s){const y=A(!1),g=n=>{y.value=n};return(n,l)=>{const d=j,u=Pt;return r(),_(k,null,[e("div",Bt,[a(d,{id:"tournaments-all-toggle",value:!1,onToggle:g}),f(),Rt]),(r(!0),_(k,null,P(s.detail.tournaments,(o,c)=>(r(),_("div",{class:B(["tc",("containerClass"in n?n.containerClass:t(at))(c)]),key:o.tournament_key},[a(u,{tournament:o,detail:s.detail,i:c,openAll:t(y)},null,8,["tournament","detail","i","openAll"])],2))),128))],64)}}}),Ot={key:0},Vt=e("h2",null,"大会結果",-1),Xt=T({__name:"detail",setup(s){const y=W(),{tournaments:g}=X(y),n=Y(),l=A(null),d=async()=>{l.value=null,l.value=await tt((n.query.p||"").toString())},u=V(()=>{if(l.value)return H(l.value.matches.map(o=>({key:o.tnmt_key,wl:o.wl===!0})),l.value.tournaments.map(o=>({key:o.tournament_key,result:o.team_result})),g.value)});return lt(n.path),d(),G(d),(o,c)=>{const i=E,p=F,w=pt,m=Lt,$=q;return r(),_("div",null,[t(l)?(r(),Z($,{key:0},{fallback:R(()=>[]),default:R(()=>[a(i,{title:`${t(l).player.collated_name}: 戦績`},null,8,["title"]),e("h1",{class:B(("ratingClass"in o?o.ratingClass:t(st))(t(l).player.collated_name))},h(t(l).player.collated_name),3),a(p,{current:"detail",p:t(n).query.p},null,8,["p"]),a(w,{detail:t(l),resultsSum:t(u)},null,8,["detail","resultsSum"]),t(l).tournaments.length>0?(r(),_("div",Ot,[Vt,a(m,{detail:t(l)},null,8,["detail"])])):v("",!0)]),_:1})):v("",!0)])}}});export{Xt as default};
