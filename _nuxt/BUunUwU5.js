import{g as v,y as S,D as M,r as C,G as T,u as _,o,c as s,A as L,t as a,E as p,d as f,b as N,w as q,F as A,e as B}from"./BBkzEklE.js";import{q as F}from"./8tetxUNc.js";const V={class:"calendar"},b={key:0},E={key:1},H={key:2,class:"event"},j={key:0,class:"m"},G={key:1,class:"m"},P=v({__name:"List",props:{day:{}},async setup(m){let d,g;const{data:y}=([d,g]=S(()=>M(()=>F("/topic").find(),"$9KyyrXfTBS")),d=await d,g(),d),{day:c}=m,i=new Date,h=c*24*60*60*1e3,D=new Date(i.getTime()-h),w=new Date(i.getTime()+h);let r=[{topic:"",path:"",date:i,title:""}];for(const n of y.value)for(const e of n.dates)c!==0&&(new Date(e.date)<D||new Date(e.date)>w)||r.push({topic:n.title||"",path:n._path||"",title:e.title,date:new Date(e.date)});r=r.sort((n,e)=>n.date<e.date?1:-1);const k=n=>{if(c===0)return"";const e=n.getDate()-i.getDate();return-2<=e&&e<=2?["一昨日","昨日","本日","明日","明後日"][e+2]:""},l=C(!1);return c===0&&(l.value=!0),T(()=>{l.value=!0}),(n,e)=>{const x=B;return _(l)?(o(!0),s(A,{key:0},L(_(r),(t,u)=>(o(),s("div",V,[u===0||t.date.getMonth()!==_(r)[u-1].date.getMonth()?(o(),s("h3",b,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):p("",!0),u===0||t.date.getDate()!==_(r)[u-1].date.getDate()?(o(),s("h4",E,a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") "+a(k(t.date)),1)):p("",!0),t.title!=""?(o(),s("div",H,[t.date.getHours()!==0&&t.date.getMinutes()!==0?(o(),s("span",j,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(o(),s("span",G,"--:--")),f("   "),N(x,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:q(()=>[f(a(t.topic),1)]),_:2},1032,["to"]),f(" - "+a(t.title),1)])):p("",!0)]))),256)):p("",!0)}}});export{P as _};
