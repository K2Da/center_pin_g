import{_ as O,a as q}from"./-UkV0DRF.js";import{_ as E}from"./Bv6iiPZ4.js";import{_ as F,a as z,b as V,l as G,c as H}from"./ET1QxUSo.js";import{_ as J}from"./DGOWrB6E.js";import{_ as I}from"./DiPjfFuo.js";import{_ as P}from"./DSdfHIYW.js";import{g as T,r as M,o as c,c as u,d as y,t as p,E as k,b as s,a as e,F as v,A as R,u as t,h as Q,I as U,J as B,G as K,l as W,s as X,k as Y,C as Z,w as L,K as x}from"./EZXTmYwb.js";import{_ as tt}from"./DGEr-9cK.js";import{_ as j}from"./BxUmGQpm.js";import{s as et,c as nt,r as at}from"./Hidao-jX.js";import{_ as st}from"./CkIHFZm3.js";import{s as ot}from"./aF-ICrRu.js";import"./ElHodgMH.js";import"./DKH5YJ_G.js";const lt={key:0},rt=e("span",{class:"muted"},"大会出場名: ",-1),it={key:1},ct=e("span",{class:"muted"},"ratings: ",-1),mt={key:2},ut=e("span",{class:"muted"},"url: ",-1),_t=e("span",{class:"muted"},"チーム",-1),dt={class:"muted"},pt=T({__name:"Info",props:{detail:{},resultsSum:{}},setup($){const{detail:h,resultsSum:f}=$,n=a=>{const r={};for(const i of a.tournaments){const d=i.team_current_name;r[d]?(r[d].count+=1,r[d].lastMatchAt=Math.max(i.tournament_date,r[d].lastMatchAt)):r[d]={name:d,count:1,lastMatchAt:i.tournament_date}}return Object.values(r).sort(i=>-i.lastMatchAt)},o=()=>{_.value=!0},_=M(!1),l=n(h);return(a,r)=>{var g,S,N,b,A;const i=F,d=J,w=I,m=P;return c(),u("ul",null,[((S=(g=a.detail.player.data)==null?void 0:g.aliases)==null?void 0:S.length)>0?(c(),u("li",lt,[rt,y(" "+p(a.detail.player.data.aliases.join(", ")),1)])):k("",!0),s(i,{resultsSum:a.resultsSum},null,8,["resultsSum"]),a.detail.player.rating?(c(),u("li",it,[ct,y(" "+p(a.detail.player.rating.toLocaleString()),1)])):k("",!0),a.detail.player.data?(c(),u("li",mt,[ut,s(d,{twitter:(N=a.detail.player.data)==null?void 0:N.twitter,youtube:(b=a.detail.player.data)==null?void 0:b.youtube,twitch:(A=a.detail.player.data)==null?void 0:A.twitch},null,8,["twitter","youtube","twitch"])])):k("",!0),e("li",null,[_t,e("ul",null,[(c(!0),u(v,null,R(t(l),(C,D)=>(c(),u("li",{key:C.name},[t(l).length<=3||D===0||D===t(l).length-1||t(_)?(c(),u(v,{key:0},[e("span",dt,[s(w,{date:C.lastMatchAt,spacing:!0},null,8,["date"])]),y("  "),s(m,{name:C.name,currentName:C.name},null,8,["name","currentName"]),y(" ("+p(C.count)+") ",1)],64)):k("",!0),!t(_)&&t(l).length>=3&&D===1?(c(),u("button",{key:1,class:"muted",onClick:o}," /* 他"+p(t(l).length-2)+"チーム */ ",1)):k("",!0)]))),128))])])])}}}),ht={class:"ti",style:{width:"8em","padding-left":"0.5em"}},yt=e("span",{class:"muted"},"r: ",-1),ft={class:"ti tac",style:{width:"2em"}},gt={class:"ti tac",style:{width:"4em"}},$t={class:"ti",style:{width:"24em"}},wt={class:"ti",style:{width:"4em"}},kt={class:"ti",style:{width:"48em"}},vt=T({__name:"Matches",props:{detail:{},tournament:{},index:{},show:{type:Boolean}},setup($){const{detail:h,tournament:f,index:n,show:o}=$,_=h.matches.filter(l=>l.tnmt_key===f.tournament_key);return(l,a)=>{const r=z,i=P,d=O,w=j;return c(!0),u(v,null,R(t(_),(m,g)=>Q((c(),u("div",{class:B(["stc",("subContainerClass"in l?l.subContainerClass:t(et))(g,l.index,t(_).length)]),key:`${m.bracket}_${m.round}`,style:{"margin-left":"0.5em",width:"calc(100% - 0.5em)"}},[e("div",ht,[y(p(m.bracket)+" ",1),yt,y(p(m.round),1)]),e("div",ft,[s(r,{win:m.wl},null,8,["win"])]),e("div",gt,p(m.score_text),1),e("div",$t,[s(i,{name:m.opponent_team_name,currentName:m.opponent_team_current_name},null,8,["name","currentName"])]),e("div",wt,[s(d,{rank:m.opponent_team_rank},null,8,["rank"])]),e("div",kt,[s(w,{names:m.opponents_list},null,8,["names"])])],2)),[[U,l.show]])),128)}}}),Ct={class:"ti",style:{width:"2em","padding-left":"0.5em"}},Tt={class:"ti tal",style:{width:"7em"}},St={class:"ti tar",style:{width:"3em","padding-right":"4px"}},Nt={class:"ti",style:{width:"32em"}},bt={class:"ti",style:{width:"18em"}},At={class:"ti",style:{width:"34em"}},Mt={class:"ti",style:{width:"14em"}},Dt=e("span",{class:"muted"},"📈",-1),Pt={class:"muted"},Rt=T({__name:"Tournament",props:{detail:{},tournament:{},i:{},openAll:{type:Boolean}},setup($){const h=$,{detail:f,tournament:n,i:o}=h,_=M(!1),l=i=>{_.value=i},a=K(()=>_.value||h.openAll),r=i=>i==null?"-":i.toLocaleString();return(i,d)=>{const w=V,m=I,g=O,S=tt,N=P,b=j,A=vt;return c(),u(v,null,[e("div",Ct,[s(w,{id:`tournaments-toggle-${t(o)}`,value:!1,onToggle:l},null,8,["id"])]),e("div",Tt,[s(m,{date:t(n).tournament_date,spacing:!0},null,8,["date"])]),e("div",St,[s(g,{rank:t(n).team_result},null,8,["rank"])]),e("div",Nt,[s(S,{name:t(n).tournament_name,tournamentKey:t(n).tournament_key},null,8,["name","tournamentKey"])]),e("div",bt,[s(N,{name:t(n).team_name,currentName:t(n).team_current_name},null,8,["name","currentName"])]),e("div",At,[y(p(t(n).member_name)+", ",1),s(b,{names:t(n).mate_list},null,8,["names"])]),e("div",Mt,[Dt,y(" "+p(r(t(n).rating))+" ",1),e("span",Pt,"("+p(r(t(n).rank))+"位 / "+p(r(t(n).total))+"人)",1)]),s(A,{detail:t(f),tournament:t(n),index:t(o),show:t(a)},null,8,["detail","tournament","index","show"])],64)}}}),Bt={style:{padding:"0 0 0.2em 0.5em"}},Lt=e("span",null,"All",-1),Ot=T({__name:"Tournaments",props:{detail:{}},setup($){const h=M(!1),f=n=>{h.value=n};return(n,o)=>{const _=V,l=Rt;return c(),u(v,null,[e("div",Bt,[s(_,{id:"tournaments-all-toggle",value:!1,onToggle:f}),y(),Lt]),(c(!0),u(v,null,R(n.detail.tournaments,(a,r)=>(c(),u("div",{class:B(["tc",("containerClass"in n?n.containerClass:t(nt))(r)]),key:a.tournament_key},[s(l,{tournament:a,detail:n.detail,i:r,openAll:t(h)},null,8,["tournament","detail","i","openAll"])],2))),128))],64)}}}),Vt={key:0},It=e("h2",null,"大会結果",-1),Zt=T({__name:"detail",setup($){const h=W(),{tournaments:f}=X(h),n=Y(),o=M(null),_=async()=>{o.value=null,o.value=await x((n.query.p||"").toString())},l=K(()=>{if(o.value)return H(o.value.matches.map(a=>({key:a.tnmt_key,wl:a.wl===!0})),o.value.tournaments.map(a=>({key:a.tournament_key,result:a.team_result})),f.value)});return ot(n.path),_(),G(_),(a,r)=>{const i=q,d=E,w=pt,m=Ot,g=st;return c(),u("div",null,[t(o)?(c(),Z(g,{key:0},{fallback:L(()=>[]),default:L(()=>[s(i,{title:`${t(o).player.collated_name}: 戦績`},null,8,["title"]),e("h1",{class:B(("ratingClass"in a?a.ratingClass:t(at))(t(o).player.collated_name))},p(t(o).player.collated_name),3),s(d,{current:"detail",p:t(n).query.p},null,8,["p"]),s(w,{detail:t(o),resultsSum:t(l)},null,8,["detail","resultsSum"]),t(o).tournaments.length>0?(c(),u("div",Vt,[It,s(m,{detail:t(o)},null,8,["detail"])])):k("",!0)]),_:1})):k("",!0)])}}});export{Zt as default};
