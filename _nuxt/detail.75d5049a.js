import{_ as b}from"./PageHead.vue_vue_type_script_setup_true_lang.87be36da.js";import{_ as M}from"./PlayerNaviLink.vue_vue_type_script_setup_true_lang.fad511c7.js";import{_ as B,a as E}from"./MatchResult.vue_vue_type_script_setup_true_lang.110c239d.js";import{_ as L}from"./SocialAccounts.vue_vue_type_script_setup_true_lang.e62c84cc.js";import{_ as N}from"./DateTime.vue_vue_type_script_setup_true_lang.2a75c6de.js";import{_ as A}from"./TeamName.vue_vue_type_script_setup_true_lang.806cde21.js";import{a as D,o as _,e as r,h as d,t as m,p as k,q as l,f as t,F as C,r as g,v as F,w as x,u as v,x as V,b as q,y as I,z as R,A as j,s as z,c as K,B as S,C as O,D as H,E as G}from"./entry.a2997cac.js";import{_ as T}from"./PlayersLine.vue_vue_type_script_setup_true_lang.8e079fda.js";import{_ as J}from"./TournamentName.vue_vue_type_script_setup_true_lang.95053e47.js";import"./PlayerName.vue_vue_type_script_setup_true_lang.844e2bea.js";const Q={key:0},U=t("span",{class:"muted"},"\u5927\u4F1A\u51FA\u5834\u540D: ",-1),W={key:1},X=t("span",{class:"muted"},"ratings: ",-1),Y={key:2},Z=t("span",{class:"muted"},"url: ",-1),tt=t("span",{class:"muted"},"\u30C1\u30FC\u30E0",-1),et={class:"muted"},st=d("\xA0 "),nt=D({__name:"PlayerDetailInfo",props:{detail:null,resultsSum:null},setup(c){const y=$=>{const o={};for(const e of $.tournaments){const n=e.team_current_name;o[n]?(o[n].count+=1,o[n].lastMatchAt=Math.max(e.tournament_date,o[n].lastMatchAt)):o[n]={name:n,count:1,lastMatchAt:e.tournament_date}}return Object.values(o).sort(e=>-e.lastMatchAt)};return($,o)=>{var u,s,a,h,w;const e=B,n=L,p=N,i=A;return _(),r("ul",null,[((s=(u=c.detail.data)==null?void 0:u.aliases)==null?void 0:s.length)>0?(_(),r("li",Q,[U,d(" "+m(c.detail.data.aliases.join(", ")),1)])):k("",!0),l(e,{resultsSum:c.resultsSum},null,8,["resultsSum"]),c.detail.player.rating?(_(),r("li",W,[X,d(" "+m(c.detail.player.rating.toLocaleString()),1)])):k("",!0),c.detail.data?(_(),r("li",Y,[Z,l(n,{twitter:(a=c.detail.data)==null?void 0:a.twitter,youtube:(h=c.detail.data)==null?void 0:h.youtube,twitch:(w=c.detail.data)==null?void 0:w.twitch},null,8,["twitter","youtube","twitch"])])):k("",!0),t("li",null,[tt,t("ul",null,[(_(!0),r(C,null,g(y(c.detail),f=>(_(),r("li",{key:f.name},[t("span",et,[l(p,{date:f.lastMatchAt,spacing:!0},null,8,["date"])]),st,l(i,{name:f.name,currentName:f.name},null,8,["name","currentName"]),d(" ("+m(f.count)+") ",1)]))),128))])])])}}}),at={class:"ti tal",style:{width:"7em"}},lt={class:"ti tar",style:{width:"3em","padding-right":"4px"}},ot=t("span",{class:"muted"},"\u4F4D",-1),ut={class:"ti",style:{width:"32em"}},ct=["href","onClick"],it={class:"ti",style:{width:"18em"}},_t={class:"ti",style:{width:"36em"}},rt={class:"ti",style:{width:"12em"}},mt=t("span",{class:"muted"},"\u{1F4C8}",-1),dt={class:"muted"},ht=D({__name:"PlayerDetailTournaments",props:{detail:null},setup(c){const{$containerClass:y}=F(),$=e=>{var n;(n=document.getElementById(e))==null||n.scrollIntoView()},o=e=>e==null?"-":e.toLocaleString();return(e,n)=>{const p=N,i=A,u=T;return _(!0),r(C,null,g(c.detail.tournaments,(s,a)=>(_(),r("div",{class:x(["tc",v(y)(a)]),key:s.tournament_key},[t("div",at,[l(p,{date:s.tournament_date,spacing:!0},null,8,["date"])]),t("div",lt,[d(m(s.team_result)+" ",1),ot]),t("div",ut,[t("a",{href:`#${s.tournament_key}`,onClick:[n[0]||(n[0]=V((...h)=>e.linkClick&&e.linkClick(...h),["prevent","stop"])),h=>$(s.tournament_key)]},m(s.tournament_name),9,ct)]),t("div",it,[l(i,{name:s.team_name,currentName:s.team_current_name},null,8,["name","currentName"])]),t("div",_t,[l(u,{names:s.mate_list},null,8,["names"])]),t("div",rt,[mt,d(" "+m(o(s.rating))+" ",1),t("span",dt,"("+m(o(s.rank))+"\u4F4D / "+m(o(s.total))+"\u4EBA)",1)])],2))),128)}}}),pt=["id"],yt=t("span",{class:"muted"},"\u958B\u50AC\u65E5: ",-1),$t=t("span",{class:"muted"},"\u30C1\u30FC\u30E0: ",-1),ft=t("span",{class:"muted"},"\u30E1\u30F3\u30D0\u30FC: ",-1),kt=t("span",{class:"muted"},"\u7D50\u679C: ",-1),vt=t("span",{class:"muted"},"\u4F4D",-1),wt={class:"ti",style:{width:"8em"}},Ct=t("span",{class:"muted"},"r: ",-1),gt={class:"ti tac",style:{width:"2em"}},Dt={class:"ti tac",style:{width:"4em"}},Nt={class:"ti",style:{width:"24em"}},At={class:"ti",style:{width:"4em"}},Ft=t("span",{class:"muted"}," \u4F4D",-1),xt={class:"ti",style:{width:"48em"}},St=D({__name:"PlayerDetailMatches",props:{detail:null},setup(c){const{$containerClass:y}=F();return($,o)=>{const e=J,n=N,p=A,i=T,u=E;return _(!0),r(C,null,g(c.detail.tournaments,s=>(_(),r("div",{key:s.tournament_key},[t("h3",{id:s.tournament_key},[l(e,{tournamentKey:s.tournament_key,name:s.tournament_name},null,8,["tournamentKey","name"])],8,pt),t("ul",null,[t("li",null,[yt,l(n,{date:s.tournament_date,spacing:!1},null,8,["date"])]),t("li",null,[$t,l(p,{name:s.team_name,currentName:s.team_current_name},null,8,["name","currentName"])]),t("li",null,[ft,d(" "+m(s.member_name)+", ",1),l(i,{names:s.mate_list},null,8,["names"])]),t("li",null,[kt,d(" "+m(s.team_result),1),vt])]),(_(!0),r(C,null,g(c.detail.matches.filter(a=>a.tnmt_key===s.tournament_key),(a,h)=>(_(),r("div",{class:x(["tc",v(y)(h)]),key:`${a.bracket}_${a.round}`},[t("div",wt,[d(m(a.bracket)+" ",1),Ct,d(m(a.round),1)]),t("div",gt,[l(u,{win:a.wl},null,8,["win"])]),t("div",Dt,m(a.score_text),1),t("div",Nt,[l(p,{name:a.opponent_team_name,currentName:a.opponent_team_current_name},null,8,["name","currentName"])]),t("div",At,[d(m(a.opponent_team_rank),1),Ft]),t("div",xt,[l(i,{names:a.opponents_list},null,8,["names"])])],2))),128))]))),128)}}}),Tt={key:0},Pt=t("h2",null,"\u5927\u4F1A\u7D50\u679C",-1),bt={key:1},Mt=t("h2",null,"\u8A66\u5408\u7D50\u679C",-1),Ot=D({__name:"detail",setup(c){const{$host:y,$ratingClass:$}=F(),o=q(),e=I(null),n=()=>{$fetch(`${y()}/player/${o.query.p}.json`).then(i=>{for(const u of i.matches)u.wl=u.opponent_team_key===u.loser_key,u.score_text=u.wl?`${u.winner_score} - ${u.loser_score}`:`${u.loser_score} - ${u.winner_score}`;e.value=i})},p=R(()=>{if(e.value)return H(e.value.matches.map(i=>({key:i.tnmt_key,wl:i.wl===!0})),e.value.tournaments.map(i=>({key:i.tournament_key,result:i.team_result})),G.value)});return j(()=>o.query,async()=>{e.value=null,await n()}),z(o.path),n(),(i,u)=>{const s=b,a=M,h=nt,w=ht,f=St,P=O;return _(),r("div",null,[e.value?(_(),K(P,{key:0},{fallback:S(()=>[]),default:S(()=>[l(s,{title:e.value.player.collated_name},null,8,["title"]),t("h1",{class:x(v($)(e.value.player.rating))},m(e.value.player.collated_name),3),l(a,{current:"detail",p:v(o).query.p},null,8,["p"]),l(h,{detail:e.value,resultsSum:v(p)},null,8,["detail","resultsSum"]),e.value.tournaments.length>0?(_(),r("div",Tt,[Pt,l(w,{detail:e.value},null,8,["detail"])])):k("",!0),e.value.tournaments.length>0?(_(),r("div",bt,[Mt,l(f,{detail:e.value},null,8,["detail"])])):k("",!0)]),_:1})):k("",!0)])}}});export{Ot as default};
