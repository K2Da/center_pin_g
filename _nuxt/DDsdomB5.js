import{g as S,y as x,D as M,r as C,G as N,H as B,o as n,c as o,F as h,A as L,u,t as a,E as g,d as l,a as V,b as q,w as A,e as F}from"./D1rb8qPD.js";import{q as H}from"./CtcWIveT.js";import{d as D}from"./BnTWvvo6.js";const b={class:"calendar"},E={key:0},j={key:1},G={style:{color:"yellowgreen"}},J={key:2,class:"event"},K={key:0,class:"m"},P={key:1,class:"m"},z=S({__name:"List",props:{day:{}},async setup(w){let c,y;const{data:k}=([c,y]=x(()=>M(()=>H("/topic").find(),"$9KyyrXfTBS")),c=await c,y(),c),{day:f}=w,T=()=>{if(f!==0&&!p.value)return[];const s=new Date,r=f*24*60*60*1e3,m=new Date(s.getTime()-r),t=new Date(s.getTime()+r);let e=[{topic:"",path:"",date:s,title:""}];for(const i of k.value)for(const d of i.dates)f!==0&&(new Date(d.date)<m||new Date(d.date)>t)||e.push({topic:i.title||"",path:i._path||"",title:d.title,date:new Date(d.date)});return e=e.sort((i,d)=>i.date<d.date?1:-1),e},v=s=>{if(!p)return"";const r=D(s.getTime(),new Date().getTime());return-2<=r&&r<=2?["一昨日","昨日","今日","明日","明後日"][r+2]:""},p=C(!1),_=N(()=>T());return B(()=>{p.value=!0}),(s,r)=>{const m=F;return n(),o("div",b,[(n(!0),o(h,null,L(u(_),(t,e)=>(n(),o(h,null,[e===0||t.date.getMonth()!==u(_)[e-1].date.getMonth()?(n(),o("h3",E,a(t.date.getFullYear())+"年 "+a(t.date.getMonth()+1)+"月 ",1)):g("",!0),e===0||("diffDays"in s?s.diffDays:u(D))(t.date.getTime(),u(_)[e-1].date.getTime())!==0?(n(),o("h4",j,[l(a(t.date.getDate())+"日 ("+a(t.date.toLocaleDateString("ja-JP",{weekday:"short"}))+") ",1),V("span",G,a(v(t.date)),1)])):g("",!0),t.title!=""?(n(),o("div",J,[t.date.getHours()!==0||t.date.getMinutes()!==0?(n(),o("span",K,a(t.date.getHours().toString().padStart(2,"0"))+":"+a(t.date.getMinutes().toString().padStart(2,"0")),1)):(n(),o("span",P,"--:--")),l("   "),q(m,{to:{name:"topic-detail",query:{t:t.path.substring(7)}},"no-prefetch":""},{default:A(()=>[l(a(t.topic),1)]),_:2},1032,["to"]),l(" - "+a(t.title),1)])):g("",!0)],64))),256))])}}});export{z as _};
